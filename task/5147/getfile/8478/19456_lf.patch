# HG changeset patch
# User HackaLittleBit
# Date 1342734783 -3600
# Node ID 8feb2779b2052b6fb34cdf4c8133b08ffb2eb658
# Parent  105cb37f00581ce6edb9e83e08d3e9cb41fe37f1
All changes in genworld_gui.cpp and one change in openttd.cpp.

diff -r 105cb37f0058 -r 8feb2779b205 src/genworld_gui.cpp
--- a/src/genworld_gui.cpp	Tue Jul 17 17:01:20 2012 +0100
+++ b/src/genworld_gui.cpp	Thu Jul 19 22:53:03 2012 +0100
@@ -32,7 +32,6 @@
 
 #include "widgets/genworld_widget.h"
 
-
 extern void MakeNewgameSettingsLive();
 
 /** Enum for the modes we can generate in. */
@@ -42,6 +41,13 @@
 	GLWM_SCENARIO,  ///< Generate flat land.
 };
 
+/** Used to remember which window mode was active, 
+ *  befor calling heightmap screen.
+ *  This in order to determine if we enter scenario
+ *  editor or start new game from heightmap
+ */
+GenenerateLandscapeWindowMode _call_mode;
+
 /**
  * Changes landscape type and sets genworld window dirty
  * @param landscape new landscape type
@@ -53,17 +59,20 @@
 	InvalidateWindowClassesData(WC_GENERATE_LANDSCAPE);
 }
 
-/** Widgets of GenerateLandscapeWindow when generating world */
-static const NWidgetPart _nested_generate_landscape_widgets[] = {
+/** Widgets of GenerateLandscapeWindow when generating world advanced+ */
+static const NWidgetPart _nested_generate_landscape_widgets_plus[] = {
 	NWidget(NWID_HORIZONTAL),
 		NWidget(WWT_CLOSEBOX, COLOUR_BROWN),
 		NWidget(WWT_CAPTION, COLOUR_BROWN), SetDataTip(STR_MAPGEN_WORLD_GENERATION_CAPTION, STR_NULL),
 	EndContainer(),
 	NWidget(WWT_PANEL, COLOUR_BROWN),
-		NWidget(NWID_SPACER), SetMinimalSize(0, 10),
+		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_NEW_MAP), SetDataTip(STR_MAPGEN_RANDOM_GAME, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SCENARIO), SetDataTip(STR_MAPGEN_LOAD_SCENARIO, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_HEIGHT_MAP), SetDataTip(STR_MAPGEN_LOAD_HEIGHTMAP, STR_NULL), SetFill(1, 0),
+		EndContainer(),
 		/* Landscape selection. */
-		NWidget(NWID_HORIZONTAL), SetPIP(10, 0, 10),
-			NWidget(NWID_SPACER), SetFill(1, 0),
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
 			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TEMPERATE), SetDataTip(SPR_SELECT_TEMPERATE, STR_INTRO_TOOLTIP_TEMPERATE),
 			NWidget(NWID_SPACER), SetFill(1, 0),
 			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_ARCTIC), SetDataTip(SPR_SELECT_SUB_ARCTIC, STR_INTRO_TOOLTIP_SUB_ARCTIC_LANDSCAPE),
@@ -71,117 +80,143 @@
 			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TROPICAL), SetDataTip(SPR_SELECT_SUB_TROPICAL, STR_INTRO_TOOLTIP_SUB_TROPICAL_LANDSCAPE),
 			NWidget(NWID_SPACER), SetFill(1, 0),
 			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TOYLAND), SetDataTip(SPR_SELECT_TOYLAND, STR_INTRO_TOOLTIP_TOYLAND_LANDSCAPE),
+		EndContainer(),
+		/* Starting date. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_MAPGEN_DATE),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD),
+			EndContainer(),
 			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_ADVANCED_TEXT_PLUS_MIN), SetDataTip(STR_JUST_STRING, STR_NULL),
 		EndContainer(),
-		NWidget(NWID_SPACER), SetMinimalSize(0, 11),
-		NWidget(NWID_HORIZONTAL), SetPIP(10, 5, 10),
-			NWidget(NWID_HORIZONTAL), SetPIP(0, 3, 0),
-				/* Left column with labels. */
-				NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL), SetFill(1, 1),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_LAND_GENERATOR, STR_NULL), SetFill(1, 1),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_TOWNS, STR_NULL), SetFill(1, 1),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TERRAIN_TYPE, STR_NULL), SetFill(1, 1),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_RANDOM_SEED, STR_NULL), SetFill(1, 1),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_SEA_LAKES, STR_NULL), SetFill(1, 1),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TREE_PLACER, STR_NULL), SetFill(1, 1),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_VARIETY, STR_NULL), SetFill(1, 1),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BORDER_TYPE, STR_NULL), SetFill(1, 1),
 				EndContainer(),
-				/* Widgets at the right of the labels. */
+
+		/* Begin Map section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_MAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TERRAIN_TYPE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SMOOTHNESS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BORDER_TYPE, STR_NULL), SetFill(0, 1),
+						NWidget(NWID_HORIZONTAL),
+							NWidget(NWID_SPACER), SetFill(1, 0),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NORTHWEST, STR_NULL), SetFill(0, 1),
+						EndContainer(),
+						NWidget(NWID_HORIZONTAL),
+							NWidget(NWID_SPACER), SetFill(1, 0),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NORTHEAST, STR_NULL), SetFill(0, 1),
+						EndContainer(),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_SEA_LAKES, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
 				NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
 					/* Mapsize X * Y. */
+						NWidget(NWID_HORIZONTAL), SetPIP(0, 2, 0),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+						EndContainer(),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TERRAIN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_SMOOTHNESS_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_BORDERS_RANDOM), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_NW), SetDataTip(STR_JUST_STRING, STR_MAPGEN_NORTHWEST),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_NE), SetDataTip(STR_JUST_STRING, STR_MAPGEN_NORTHEAST),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_WATER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_LAND_GENERATOR, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_VARIETY, STR_NULL), SetFill(0, 1),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_SW), SetDataTip(STR_JUST_STRING, STR_MAPGEN_SOUTHWEST),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_SE), SetDataTip(STR_JUST_STRING, STR_MAPGEN_SOUTHEAST),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_LANDSCAPE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_VARIETY_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SOUTHWEST, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SOUTHEAST, STR_NULL), SetFill(0, 1),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+					EndContainer(),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Map section */
+
+		/* Begin Scenario section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_SCENARIO, STR_NULL), SetPadding(5, 10, 5, 10),
 					NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
-						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL), SetFill(1, 0),
-						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL), SetPadding(1, 0, 0, 0), SetFill(1, 1),
-						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL), SetFill(1, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_RIVERS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_TOWNS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_TOWN_NAMES_FRAME, STR_NULL), SetFill(0, 1),
 					EndContainer(),
-					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_LANDSCAPE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TERRAIN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-					NWidget(WWT_EDITBOX, COLOUR_WHITE, WID_GL_RANDOM_EDITBOX), SetDataTip(STR_MAPGEN_RANDOM_SEED_OSKTITLE, STR_MAPGEN_RANDOM_SEED_HELP), SetFill(1, 1),
-					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_WATER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TREE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_VARIETY_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-					NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_BORDERS_RANDOM), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_RIVER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_NAMES_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
 				EndContainer(),
 			EndContainer(),
-			NWidget(NWID_VERTICAL), SetPIP(0, 4, 0),
-				NWidget(NWID_HORIZONTAL), SetPIP(0, 3, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TREE_PLACER, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_INDUSTRIES, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
 					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
-						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_DATE, STR_NULL), SetFill(1, 1),
-						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(1, 1),
-						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_INDUSTRIES, STR_NULL), SetFill(1, 1),
-						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SMOOTHNESS, STR_NULL), SetFill(1, 1),
-					EndContainer(),
-					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
-						/* Starting date. */
-						NWidget(NWID_HORIZONTAL),
-							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD), SetFill(0, 1),
-							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_NULL), SetFill(1, 0),
-							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD), SetFill(0, 1),
-						EndContainer(),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TREE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_INDUSTRY_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
 						/* Snow line. */
 						NWidget(NWID_HORIZONTAL),
-							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN), SetFill(0, 1),
-							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL), SetFill(1, 0),
-							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP), SetFill(0, 1),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN),
+							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP),
 						EndContainer(),
-						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_INDUSTRY_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_SMOOTHNESS_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
 					EndContainer(),
 				EndContainer(),
-				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_RANDOM_BUTTON), SetDataTip(STR_MAPGEN_RANDOM, STR_MAPGEN_RANDOM_HELP), SetFill(1, 0),
-				NWidget(NWID_HORIZONTAL), SetPIP(0, 3, 0),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_RIVERS, STR_NULL), SetFill(1, 1),
-					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_RIVER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
 				EndContainer(),
-				NWidget(NWID_SPACER), SetFill(1, 1),
-				NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetMinimalSize(84, 30), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetFill(1, 0),
 			EndContainer(),
+		/* End Scenario section */
+
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 10, 14),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0), SetPadding(0, 0, 18, 0),
+				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_ROAD_VEHICLES_FRAME, STR_NULL), SetPadding(1, 0, 1, 0),
+				NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_DRIVING_SIDE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
 		EndContainer(),
-		NWidget(NWID_SPACER), SetMinimalSize(0, 4),
-		/* Map borders buttons for each edge. */
-		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPIP(10, 0, 10),
-			NWidget(NWID_HORIZONTAL), SetPIP(0, 0, 3),
-				NWidget(NWID_SPACER), SetFill(1, 1),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NORTHWEST, STR_NULL), SetPadding(1, 0, 0, 0), SetFill(0, 1),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetMinimalSize(120, 30),
 			EndContainer(),
-			NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_NW), SetDataTip(STR_JUST_STRING, STR_MAPGEN_NORTHWEST), SetFill(1, 1),
-			NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_NE), SetDataTip(STR_JUST_STRING, STR_MAPGEN_NORTHEAST), SetFill(1, 1),
-			NWidget(NWID_HORIZONTAL), SetPIP(3, 0, 0),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NORTHEAST, STR_NULL), SetPadding(1, 0, 0, 0), SetFill(0, 1),
-				NWidget(NWID_SPACER), SetFill(1, 1),
-			EndContainer(),
-		EndContainer(),
-		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPIP(10, 0, 10),
-			NWidget(NWID_HORIZONTAL), SetPIP(0, 0, 3),
-				NWidget(NWID_SPACER), SetFill(1, 1),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SOUTHWEST, STR_NULL), SetPadding(1, 0, 0, 0), SetFill(0, 1),
-			EndContainer(),
-			NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_SW), SetDataTip(STR_JUST_STRING, STR_MAPGEN_SOUTHWEST), SetFill(1, 1),
-			NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_SE), SetDataTip(STR_JUST_STRING, STR_MAPGEN_SOUTHEAST), SetFill(1, 1),
-			NWidget(NWID_HORIZONTAL), SetPIP(3, 0, 0),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SOUTHEAST, STR_NULL), SetPadding(1, 0, 0, 0), SetFill(0, 1),
-				NWidget(NWID_SPACER), SetFill(1, 1),
-			EndContainer(),
-		EndContainer(),
-		NWidget(NWID_SPACER), SetMinimalSize(0, 9), SetFill(1, 1),
 	EndContainer(),
 };
 
-/** Widgets of GenerateLandscapeWindow when loading heightmap */
-static const NWidgetPart _nested_heightmap_load_widgets[] = {
-	/* Window header. */
+/** Widgets of GenerateLandscapeWindow when generating world advanced- */
+static const NWidgetPart _nested_generate_landscape_widgets_minus[] = {
 	NWidget(NWID_HORIZONTAL),
 		NWidget(WWT_CLOSEBOX, COLOUR_BROWN),
 		NWidget(WWT_CAPTION, COLOUR_BROWN), SetDataTip(STR_MAPGEN_WORLD_GENERATION_CAPTION, STR_NULL),
 	EndContainer(),
 	NWidget(WWT_PANEL, COLOUR_BROWN),
-		NWidget(NWID_SPACER), SetMinimalSize(0, 10),
+		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_NEW_MAP), SetDataTip(STR_MAPGEN_RANDOM_GAME, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SCENARIO), SetDataTip(STR_MAPGEN_LOAD_SCENARIO, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_HEIGHT_MAP), SetDataTip(STR_MAPGEN_LOAD_HEIGHTMAP, STR_NULL), SetFill(1, 0),
+		EndContainer(),
 		/* Landscape selection. */
-		NWidget(NWID_HORIZONTAL), SetPIP(10, 0, 10),
-			NWidget(NWID_SPACER), SetFill(1, 0),
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
 			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TEMPERATE), SetDataTip(SPR_SELECT_TEMPERATE, STR_INTRO_TOOLTIP_TEMPERATE),
 			NWidget(NWID_SPACER), SetFill(1, 0),
 			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_ARCTIC), SetDataTip(SPR_SELECT_SUB_ARCTIC, STR_INTRO_TOOLTIP_SUB_ARCTIC_LANDSCAPE),
@@ -189,68 +224,774 @@
 			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TROPICAL), SetDataTip(SPR_SELECT_SUB_TROPICAL, STR_INTRO_TOOLTIP_SUB_TROPICAL_LANDSCAPE),
 			NWidget(NWID_SPACER), SetFill(1, 0),
 			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TOYLAND), SetDataTip(SPR_SELECT_TOYLAND, STR_INTRO_TOOLTIP_TOYLAND_LANDSCAPE),
+		EndContainer(),
+		/* Starting date. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_MAPGEN_DATE),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD),
+			EndContainer(),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_ADVANCED_TEXT_PLUS_MIN), SetDataTip(STR_JUST_STRING, STR_NULL),
+			EndContainer(),
+		EndContainer(),
+
+		/* Begin Map section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_MAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TERRAIN_TYPE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SMOOTHNESS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_SEA_LAKES, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						/* Mapsize X * Y. */
+						NWidget(NWID_HORIZONTAL), SetPIP(0, 2, 0),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+						EndContainer(),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TERRAIN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_SMOOTHNESS_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_WATER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_SPACER), SetFill(1, 0),
 			NWidget(NWID_SPACER), SetFill(1, 0),
 		EndContainer(),
-		NWidget(NWID_SPACER), SetMinimalSize(0, 11), SetFill(0, 1),
-		NWidget(NWID_HORIZONTAL), SetPIP(10, 3, 10),
-			/* Labels at the left side. */
+			EndContainer(),
+		EndContainer(),
+		/* End Map section */
+
+		/* Begin Scenario section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_SCENARIO, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_TOWNS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_TOWN_NAMES_FRAME, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
 			NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_HEIGHTMAP_NAME, STR_NULL), SetFill(1, 1),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL), SetFill(1, 1),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_TOWNS, STR_NULL), SetFill(1, 1),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_INDUSTRIES, STR_NULL), SetFill(1, 1),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_RANDOM_SEED, STR_NULL), SetFill(1, 1),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_RIVERS, STR_NULL), SetFill(1, 1),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TREE_PLACER, STR_NULL), SetFill(1, 1),
-				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_HEIGHTMAP_ROTATION, STR_NULL), SetFill(1, 1),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_NAMES_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
 			EndContainer(),
-			/* Widgets at the right of the labels. */
-			NWidget(NWID_VERTICAL), SetPIP(0, 4, 0),
-				NWidget(WWT_EMPTY, COLOUR_ORANGE, WID_GL_HEIGHTMAP_NAME_TEXT), SetFill(1, 0),
-				NWidget(NWID_HORIZONTAL), SetPIP(0, 5, 0),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_INDUSTRIES, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_INDUSTRY_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						/* Snow line. */
+						NWidget(NWID_HORIZONTAL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN),
+							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP),
+						EndContainer(),
+					EndContainer(),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Scenario section */
+
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 10, 14),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetMinimalSize(120, 30),
+		EndContainer(),
+	EndContainer(),
+};
+
+/** Widgets of GenerateLandscapeWindow for scenario editor advanced+ */
+static const NWidgetPart _nested_generate_landscape_se_widgets_plus[] = {
+	NWidget(NWID_HORIZONTAL),
+		NWidget(WWT_CLOSEBOX, COLOUR_BROWN),
+		NWidget(WWT_CAPTION, COLOUR_BROWN), SetDataTip(STR_MAPGEN_WORLD_GENERATION_CAPTION, STR_NULL),
+	EndContainer(),
+	NWidget(WWT_PANEL, COLOUR_BROWN),
+		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_NEW_MAP), SetDataTip(STR_MAPGEN_RANDOM_GAME, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SCENARIO), SetDataTip(STR_MAPGEN_LOAD_SCENARIO, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_HEIGHT_MAP), SetDataTip(STR_MAPGEN_LOAD_HEIGHTMAP, STR_NULL), SetFill(1, 0),
+		EndContainer(),
+		/* Landscape selection. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TEMPERATE), SetDataTip(SPR_SELECT_TEMPERATE, STR_INTRO_TOOLTIP_TEMPERATE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_ARCTIC), SetDataTip(SPR_SELECT_SUB_ARCTIC, STR_INTRO_TOOLTIP_SUB_ARCTIC_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TROPICAL), SetDataTip(SPR_SELECT_SUB_TROPICAL, STR_INTRO_TOOLTIP_SUB_TROPICAL_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TOYLAND), SetDataTip(SPR_SELECT_TOYLAND, STR_INTRO_TOOLTIP_TOYLAND_LANDSCAPE),
+		EndContainer(),
+		/* Starting date. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_MAPGEN_DATE),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD),
+			EndContainer(),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_ADVANCED_TEXT_PLUS_MIN), SetDataTip(STR_JUST_STRING, STR_NULL),
+			EndContainer(),
+		EndContainer(),
+
+		/* Begin Map section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_MAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TERRAIN_TYPE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SMOOTHNESS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BORDER_TYPE, STR_NULL), SetFill(0, 1),
+						NWidget(NWID_HORIZONTAL),
+							NWidget(NWID_SPACER), SetFill(1, 0),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NORTHWEST, STR_NULL), SetFill(0, 1),
+						EndContainer(),
+						NWidget(NWID_HORIZONTAL),
+							NWidget(NWID_SPACER), SetFill(1, 0),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NORTHEAST, STR_NULL), SetFill(0, 1),
+						EndContainer(),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_SEA_LAKES, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
 					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
 						/* Mapsize X * Y. */
+						NWidget(NWID_HORIZONTAL), SetPIP(0, 2, 0),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+						EndContainer(),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TERRAIN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_SMOOTHNESS_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_BORDERS_RANDOM), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_NW), SetDataTip(STR_JUST_STRING, STR_MAPGEN_NORTHWEST),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_NE), SetDataTip(STR_JUST_STRING, STR_MAPGEN_NORTHEAST),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_WATER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_LAND_GENERATOR, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_VARIETY, STR_NULL), SetFill(0, 1),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_SW), SetDataTip(STR_JUST_STRING, STR_MAPGEN_SOUTHWEST),
+						NWidget(WWT_PUSHTXTBTN, COLOUR_ORANGE, WID_GL_WATER_SE), SetDataTip(STR_JUST_STRING, STR_MAPGEN_SOUTHEAST),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_LANDSCAPE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_VARIETY_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SOUTHWEST, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SOUTHEAST, STR_NULL), SetFill(0, 1),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+					EndContainer(),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Map section */
+
+		/* Begin Scenario section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_SCENARIO, STR_NULL), SetPadding(5, 10, 5, 10),
 						NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
-							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL), SetFill(1, 0),
-							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL), SetPadding(1, 0, 0, 0), SetFill(1, 1),
-							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL), SetFill(1, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_RIVERS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_TOWN_NAMES_FRAME, STR_NULL), SetFill(0, 1),
 						EndContainer(),
-						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_INDUSTRY_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-						NWidget(WWT_EDITBOX, COLOUR_WHITE, WID_GL_RANDOM_EDITBOX), SetDataTip(STR_MAPGEN_RANDOM_SEED_OSKTITLE, STR_MAPGEN_RANDOM_SEED_HELP), SetFill(1, 1),
-						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_RIVER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TREE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
-						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_HEIGHTMAP_ROTATION_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL), SetFill(1, 0),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_RIVER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_NAMES_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TREE_PLACER, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TREE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						/* Snow line. */
+						NWidget(NWID_HORIZONTAL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN),
+							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP),
+						EndContainer(),
+					EndContainer(),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Scenario section */
+
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 10, 14),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0), SetPadding(0, 0, 18, 0),
+				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_ROAD_VEHICLES_FRAME, STR_NULL), SetPadding(1, 0, 1, 0),
+				NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_DRIVING_SIDE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+			EndContainer(),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetMinimalSize(120, 30),
+		EndContainer(),
+	EndContainer(),
+};
+
+/** Widgets of GenerateLandscapeWindow for scenario editor advanced- */
+static const NWidgetPart _nested_generate_landscape_se_widgets_minus[] = {
+	NWidget(NWID_HORIZONTAL),
+		NWidget(WWT_CLOSEBOX, COLOUR_BROWN),
+		NWidget(WWT_CAPTION, COLOUR_BROWN), SetDataTip(STR_MAPGEN_WORLD_GENERATION_CAPTION, STR_NULL),
+	EndContainer(),
+	NWidget(WWT_PANEL, COLOUR_BROWN),
+		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_NEW_MAP), SetDataTip(STR_MAPGEN_RANDOM_GAME, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SCENARIO), SetDataTip(STR_MAPGEN_LOAD_SCENARIO, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_HEIGHT_MAP), SetDataTip(STR_MAPGEN_LOAD_HEIGHTMAP, STR_NULL), SetFill(1, 0),
+		EndContainer(),
+		/* Landscape selection. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TEMPERATE), SetDataTip(SPR_SELECT_TEMPERATE, STR_INTRO_TOOLTIP_TEMPERATE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_ARCTIC), SetDataTip(SPR_SELECT_SUB_ARCTIC, STR_INTRO_TOOLTIP_SUB_ARCTIC_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TROPICAL), SetDataTip(SPR_SELECT_SUB_TROPICAL, STR_INTRO_TOOLTIP_SUB_TROPICAL_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TOYLAND), SetDataTip(SPR_SELECT_TOYLAND, STR_INTRO_TOOLTIP_TOYLAND_LANDSCAPE),
+		EndContainer(),
+		/* Starting date. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_MAPGEN_DATE),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD),
+			EndContainer(),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_ADVANCED_TEXT_PLUS_MIN), SetDataTip(STR_JUST_STRING, STR_NULL),
+			EndContainer(),
+		EndContainer(),
+
+		/* Begin Map section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_MAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TERRAIN_TYPE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SMOOTHNESS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_SEA_LAKES, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						/* Mapsize X * Y. */
+						NWidget(NWID_HORIZONTAL), SetPIP(0, 2, 0),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+						EndContainer(),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TERRAIN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_SMOOTHNESS_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_WATER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Map section */
+
+		/* Begin Scenario section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_SCENARIO, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_TOWN_NAMES_FRAME, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_NAMES_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						/* Snow line. */
+						NWidget(NWID_HORIZONTAL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN),
+							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP),
+						EndContainer(),
+					EndContainer(),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Scenario section */
+
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 10, 14),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetMinimalSize(120, 30),
+		EndContainer(),
+	EndContainer(),
+};
+
+/** Widgets of GenerateLandscapeWindow for flat land advanced+ */
+static const NWidgetPart _nested_generate_landscape_flat_widgets_plus[] = {
+	NWidget(NWID_HORIZONTAL),
+		NWidget(WWT_CLOSEBOX, COLOUR_BROWN),
+		NWidget(WWT_CAPTION, COLOUR_BROWN), SetDataTip(STR_SE_MAPGEN_FLAT_WORLD, STR_NULL),
+	EndContainer(),
+	NWidget(WWT_PANEL, COLOUR_BROWN),
+		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_NEW_MAP), SetDataTip(STR_MAPGEN_RANDOM_GAME, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SCENARIO), SetDataTip(STR_MAPGEN_LOAD_SCENARIO, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_HEIGHT_MAP), SetDataTip(STR_MAPGEN_LOAD_HEIGHTMAP, STR_NULL), SetFill(1, 0),
+		EndContainer(),
+		/* Landscape selection. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TEMPERATE), SetDataTip(SPR_SELECT_TEMPERATE, STR_INTRO_TOOLTIP_TEMPERATE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_ARCTIC), SetDataTip(SPR_SELECT_SUB_ARCTIC, STR_INTRO_TOOLTIP_SUB_ARCTIC_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TROPICAL), SetDataTip(SPR_SELECT_SUB_TROPICAL, STR_INTRO_TOOLTIP_SUB_TROPICAL_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TOYLAND), SetDataTip(SPR_SELECT_TOYLAND, STR_INTRO_TOOLTIP_TOYLAND_LANDSCAPE),
+		EndContainer(),
+		/* Starting date. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_MAPGEN_DATE),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD),
+			EndContainer(),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_ADVANCED_TEXT_PLUS_MIN), SetDataTip(STR_JUST_STRING, STR_NULL),
+			EndContainer(),
+		EndContainer(),
+
+		/* Begin Map section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_MAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TERRAIN_TYPE, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						/* Mapsize X * Y. */
+						NWidget(NWID_HORIZONTAL), SetPIP(0, 2, 0),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+						EndContainer(),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TERRAIN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_SE_MAPGEN_FLAT_WORLD_HEIGHT, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(NWID_SPACER), SetFill(0, 1),
+						NWidget(NWID_HORIZONTAL), SetPIP(0, 2, 0),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_FLAT_LAND_HEIGHT_DOWN), SetFill(0, 1), SetDataTip(SPR_ARROW_DOWN, STR_SE_MAPGEN_FLAT_WORLD_HEIGHT_DOWN),
+							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_FLAT_LAND_HEIGHT_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_FLAT_LAND_HEIGHT_UP), SetFill(0, 1), SetDataTip(SPR_ARROW_UP, STR_SE_MAPGEN_FLAT_WORLD_HEIGHT_UP),
+						EndContainer(),
+					EndContainer(),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Map section */
+
+		/* Begin Scenario section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_SCENARIO, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_TOWN_NAMES_FRAME, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_NAMES_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						/* Snow line. */
+						NWidget(NWID_HORIZONTAL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN),
+							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP),
+						EndContainer(),
+					EndContainer(),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Scenario section */
+
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 10, 14),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0), SetPadding(0, 0, 18, 0),
+				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_ROAD_VEHICLES_FRAME, STR_NULL), SetPadding(1, 0, 1, 0),
+				NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_DRIVING_SIDE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+			EndContainer(),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetMinimalSize(120, 30),
+		EndContainer(),
+	EndContainer(),
+};
+
+/** Widgets of GenerateLandscapeWindow flat land advanced- */
+static const NWidgetPart _nested_generate_landscape_flat_widgets_minus[] = {
+	NWidget(NWID_HORIZONTAL),
+		NWidget(WWT_CLOSEBOX, COLOUR_BROWN),
+		NWidget(WWT_CAPTION, COLOUR_BROWN), SetDataTip(STR_SE_MAPGEN_FLAT_WORLD, STR_NULL),
+	EndContainer(),
+	NWidget(WWT_PANEL, COLOUR_BROWN),
+		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_NEW_MAP), SetDataTip(STR_MAPGEN_RANDOM_GAME, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SCENARIO), SetDataTip(STR_MAPGEN_LOAD_SCENARIO, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_HEIGHT_MAP), SetDataTip(STR_MAPGEN_LOAD_HEIGHTMAP, STR_NULL), SetFill(1, 0),
+		EndContainer(),
+		/* Landscape selection. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TEMPERATE), SetDataTip(SPR_SELECT_TEMPERATE, STR_INTRO_TOOLTIP_TEMPERATE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_ARCTIC), SetDataTip(SPR_SELECT_SUB_ARCTIC, STR_INTRO_TOOLTIP_SUB_ARCTIC_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TROPICAL), SetDataTip(SPR_SELECT_SUB_TROPICAL, STR_INTRO_TOOLTIP_SUB_TROPICAL_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TOYLAND), SetDataTip(SPR_SELECT_TOYLAND, STR_INTRO_TOOLTIP_TOYLAND_LANDSCAPE),
+		EndContainer(),
+		/* Starting date. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_MAPGEN_DATE),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD),
+			EndContainer(),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_ADVANCED_TEXT_PLUS_MIN), SetDataTip(STR_JUST_STRING, STR_NULL),
+			EndContainer(),
+		EndContainer(),
+
+		/* Begin Map section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_MAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TERRAIN_TYPE, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						/* Mapsize X * Y. */
+						NWidget(NWID_HORIZONTAL), SetPIP(0, 2, 0),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+							NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL),
+							NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+						EndContainer(),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TERRAIN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Map section */
+
+		/* Begin Scenario section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_SCENARIO, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_TOWN_NAMES_FRAME, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_NAMES_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						/* Snow line. */
+						NWidget(NWID_HORIZONTAL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN),
+							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP),
+						EndContainer(),
+					EndContainer(),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Scenario section */
+
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 10, 14),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetMinimalSize(120, 30),
+		EndContainer(),
+	EndContainer(),
+};
+
+/** Widgets of GenerateLandscapeWindow when loading heightmap avanced+ */
+static const NWidgetPart _nested_heightmap_load_widgets_plus[] = {
+	NWidget(NWID_HORIZONTAL),
+		NWidget(WWT_CLOSEBOX, COLOUR_BROWN),
+		NWidget(WWT_CAPTION, COLOUR_BROWN), SetDataTip(STR_MAPGEN_WORLD_GENERATION_CAPTION, STR_NULL),
+	EndContainer(),
+	NWidget(WWT_PANEL, COLOUR_BROWN),
+		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_NEW_MAP), SetDataTip(STR_MAPGEN_RANDOM_GAME, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SCENARIO), SetDataTip(STR_MAPGEN_LOAD_SCENARIO, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_HEIGHT_MAP), SetDataTip(STR_MAPGEN_LOAD_HEIGHTMAP, STR_NULL), SetFill(1, 0),
+		EndContainer(),
+		/* Landscape selection. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TEMPERATE), SetDataTip(SPR_SELECT_TEMPERATE, STR_INTRO_TOOLTIP_TEMPERATE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_ARCTIC), SetDataTip(SPR_SELECT_SUB_ARCTIC, STR_INTRO_TOOLTIP_SUB_ARCTIC_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TROPICAL), SetDataTip(SPR_SELECT_SUB_TROPICAL, STR_INTRO_TOOLTIP_SUB_TROPICAL_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TOYLAND), SetDataTip(SPR_SELECT_TOYLAND, STR_INTRO_TOOLTIP_TOYLAND_LANDSCAPE),
+		EndContainer(),
+		/* Starting date. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_MAPGEN_DATE),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD),
+			EndContainer(),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_ADVANCED_TEXT_PLUS_MIN), SetDataTip(STR_JUST_STRING, STR_NULL),
+			EndContainer(),
+		EndContainer(),
+
+		/* Begin Heightmap section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_HEIGHTMAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_HEIGHTMAP_NAME, STR_NULL),
+				NWidget(WWT_EMPTY, COLOUR_ORANGE, WID_GL_HEIGHTMAP_NAME_TEXT), SetFill(1, 1),
+			EndContainer(),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_HEIGHTMAP_SIZE_LABEL, STR_NULL),
+				NWidget(WWT_TEXT, COLOUR_ORANGE, WID_GL_HEIGHTMAP_SIZE_TEXT), SetDataTip(STR_MAPGEN_HEIGHTMAP_SIZE, STR_NULL), SetFill(1, 1),
+			EndContainer(),
+		EndContainer(),
+		/* End Heightmap section */
+
+		/* Begin Map section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_MAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL),
+					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_HEIGHTMAP_ROTATION, STR_NULL),
 					EndContainer(),
 					NWidget(NWID_VERTICAL), SetPIP(0, 4, 0),
-						NWidget(NWID_HORIZONTAL), SetPIP(0, 3, 0),
+					/* Mapsize X * Y. */
+					NWidget(NWID_HORIZONTAL), SetPIP(0, 2, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+					EndContainer(),
+					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_HEIGHTMAP_ROTATION_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Map section */
+
+		/* Begin Scenario section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_SCENARIO, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_QUANTITY_OF_RIVERS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_TOWNS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_TOWN_NAMES_FRAME, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
 							NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
-								NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_HEIGHTMAP_SIZE_LABEL, STR_NULL), SetFill(1, 1),
-								NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_DATE, STR_NULL), SetFill(1, 1),
-								NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(1, 1),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_RIVER_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_NAMES_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
 							EndContainer(),
-							NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
-								NWidget(WWT_TEXT, COLOUR_ORANGE, WID_GL_HEIGHTMAP_SIZE_TEXT), SetDataTip(STR_MAPGEN_HEIGHTMAP_SIZE, STR_NULL), SetFill(1, 0),
-								NWidget(NWID_HORIZONTAL),
-									NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD), SetFill(0, 1),
-									NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_NULL), SetFill(1, 0),
-									NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD), SetFill(0, 1),
 								EndContainer(),
 								NWidget(NWID_HORIZONTAL),
-									NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN), SetFill(0, 1),
-									NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL), SetFill(1, 0),
-									NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP), SetFill(0, 1),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_TREE_PLACER, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_INDUSTRIES, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(0, 1),
 								EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TREE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_INDUSTRY_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						/* Snow line. */
+						NWidget(NWID_HORIZONTAL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN),
+							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP),
 							EndContainer(),
 						EndContainer(),
-						NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_RANDOM_BUTTON), SetDataTip(STR_MAPGEN_RANDOM, STR_MAPGEN_RANDOM_HELP), SetFill(1, 0),
-						NWidget(NWID_SPACER), SetFill(1, 1),
-						NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetMinimalSize(84, 30), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetFill(1, 0),
 					EndContainer(),
 				EndContainer(),
 			EndContainer(),
+		/* End Scenario section */
+
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 10, 14),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0), SetPadding(0, 0, 18, 0),
+				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_ROAD_VEHICLES_FRAME, STR_NULL), SetPadding(1, 0, 1, 0),
+				NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_DRIVING_SIDE_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
 		EndContainer(),
-		NWidget(NWID_SPACER), SetMinimalSize(0, 9), SetFill(1, 1),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetMinimalSize(120, 30),
+		EndContainer(),
+	EndContainer(),
+};
+
+/** Widgets of GenerateLandscapeWindow when loading heightmap avanced- */
+static const NWidgetPart _nested_heightmap_load_widgets_minus[] = {
+	NWidget(NWID_HORIZONTAL),
+		NWidget(WWT_CLOSEBOX, COLOUR_BROWN),
+		NWidget(WWT_CAPTION, COLOUR_BROWN), SetDataTip(STR_MAPGEN_WORLD_GENERATION_CAPTION, STR_NULL),
+	EndContainer(),
+	NWidget(WWT_PANEL, COLOUR_BROWN),
+		NWidget(NWID_HORIZONTAL, NC_EQUALSIZE), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_NEW_MAP), SetDataTip(STR_MAPGEN_RANDOM_GAME, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SCENARIO), SetDataTip(STR_MAPGEN_LOAD_SCENARIO, STR_NULL), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_HEIGHT_MAP), SetDataTip(STR_MAPGEN_LOAD_HEIGHTMAP, STR_NULL), SetFill(1, 0),
+		EndContainer(),
+		/* Landscape selection. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TEMPERATE), SetDataTip(SPR_SELECT_TEMPERATE, STR_INTRO_TOOLTIP_TEMPERATE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_ARCTIC), SetDataTip(SPR_SELECT_SUB_ARCTIC, STR_INTRO_TOOLTIP_SUB_ARCTIC_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TROPICAL), SetDataTip(SPR_SELECT_SUB_TROPICAL, STR_INTRO_TOOLTIP_SUB_TROPICAL_LANDSCAPE),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_GL_TOYLAND), SetDataTip(SPR_SELECT_TOYLAND, STR_INTRO_TOOLTIP_TOYLAND_LANDSCAPE),
+		EndContainer(),
+		/* Starting date. */
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 0, 10), SetPIP(0, 5, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_MAPGEN_DATE),
+				NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_START_DATE_UP), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD),
+			EndContainer(),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(NWID_HORIZONTAL),
+				NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_ADVANCED_TEXT_PLUS_MIN), SetDataTip(STR_JUST_STRING, STR_NULL),
+			EndContainer(),
+		EndContainer(),
+
+		/* Begin Heightmap section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_HEIGHTMAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_HEIGHTMAP_NAME, STR_NULL),
+				NWidget(WWT_EMPTY, COLOUR_ORANGE, WID_GL_HEIGHTMAP_NAME_TEXT), SetFill(1, 1),
+			EndContainer(),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_HEIGHTMAP_SIZE_LABEL, STR_NULL),
+				NWidget(WWT_TEXT, COLOUR_ORANGE, WID_GL_HEIGHTMAP_SIZE_TEXT), SetDataTip(STR_MAPGEN_HEIGHTMAP_SIZE, STR_NULL), SetFill(1, 1),
+			EndContainer(),
+		EndContainer(),
+		/* End Heightmap section */
+
+		/* Begin Map section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_MAP, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL),
+					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_HEIGHTMAP_ROTATION, STR_NULL),
+				EndContainer(),
+				NWidget(NWID_VERTICAL), SetPIP(0, 4, 0),
+					/* Mapsize X * Y. */
+					NWidget(NWID_HORIZONTAL), SetPIP(0, 2, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
+					EndContainer(),
+					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_HEIGHTMAP_ROTATION_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Map section */
+
+		/* Begin Scenario section */
+		NWidget(WWT_FRAME, COLOUR_BROWN), SetDataTip(STR_MAPGEN_SCENARIO, STR_NULL), SetPadding(5, 10, 5, 10),
+			NWidget(NWID_HORIZONTAL), SetPIP(0, 4, 0),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_TOWNS, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_GAME_OPTIONS_TOWN_NAMES_FRAME, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_TOWN_NAMES_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+					EndContainer(),
+				EndContainer(),
+				NWidget(NWID_HORIZONTAL),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPadding(0, 4, 0, 0), SetPIP(0, 4, 0),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_NUMBER_OF_INDUSTRIES, STR_NULL), SetFill(0, 1),
+						NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_SNOW_LINE_HEIGHT, STR_NULL), SetFill(0, 1),
+					EndContainer(),
+					NWidget(NWID_SPACER), SetFill(1, 0),
+					NWidget(NWID_VERTICAL, NC_EQUALSIZE), SetPIP(0, 4, 0),
+						NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_GL_INDUSTRY_PULLDOWN), SetDataTip(STR_JUST_STRING, STR_NULL),
+						/* Snow line. */
+						NWidget(NWID_HORIZONTAL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_DOWN), SetDataTip(SPR_ARROW_DOWN, STR_MAPGEN_SNOW_LINE_DOWN),
+							NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
+							NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_GL_SNOW_LEVEL_UP), SetDataTip(SPR_ARROW_UP, STR_MAPGEN_SNOW_LINE_UP),
+						EndContainer(),
+					EndContainer(),
+				EndContainer(),
+			EndContainer(),
+		EndContainer(),
+		/* End Scenario section */
+
+		NWidget(NWID_HORIZONTAL), SetPadding(5, 10, 10, 14),
+			NWidget(NWID_SPACER), SetFill(1, 0),
+			NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_GL_GENERATE_BUTTON), SetDataTip(STR_MAPGEN_GENERATE, STR_NULL), SetMinimalSize(120, 30),
+		EndContainer(),
 	EndContainer(),
 };
 
@@ -264,10 +1005,26 @@
 	ResetGRFConfig(true);
 
 	SndPlayFx(SND_15_BEEP);
+
 	switch (mode) {
-		case GLWM_GENERATE:  _switch_mode = (_game_mode == GM_EDITOR) ? SM_GENRANDLAND    : SM_NEWGAME;         break;
-		case GLWM_HEIGHTMAP: _switch_mode = (_game_mode == GM_EDITOR) ? SM_LOAD_HEIGHTMAP : SM_START_HEIGHTMAP; break;
-		case GLWM_SCENARIO:  _switch_mode = SM_EDITOR; break;
+		case GLWM_GENERATE:
+			_switch_mode = SM_NEWGAME;
+			break;
+
+		case GLWM_HEIGHTMAP: 
+			if (_call_mode == GLWM_SCENARIO) {
+				_game_mode = GM_EDITOR; // hack !!  
+				_switch_mode = SM_LOAD_HEIGHTMAP;
+			} else {
+				_switch_mode = SM_START_HEIGHTMAP;
+			}
+			break;
+
+		case GLWM_SCENARIO:
+			_game_mode = GM_EDITOR; // hack !! see also line +/- 930 	GenerateWorld(_settings_newgame.game_creation.terrain_type_totally_flat ? GWM_EMPTY : GWM_RANDOM, 1 << _settings_game.game_creation.map_x, 1 << _settings_game.game_creation.map_y);
+			_switch_mode = (_settings_newgame.game_creation.terrain_type_totally_flat) ? SM_EDITOR : SM_GENRANDLAND;
+			break;
+
 		default: NOT_REACHED();
 	}
 }
@@ -290,7 +1047,7 @@
 	return list;
 }
 
-static const StringID _elevations[]  = {STR_TERRAIN_TYPE_VERY_FLAT, STR_TERRAIN_TYPE_FLAT, STR_TERRAIN_TYPE_HILLY, STR_TERRAIN_TYPE_MOUNTAINOUS, INVALID_STRING_ID};
+static const StringID _elevations[]  = {STR_TERRAIN_TYPE_TOTALY_FLAT, STR_TERRAIN_TYPE_VERY_FLAT, STR_TERRAIN_TYPE_FLAT, STR_TERRAIN_TYPE_HILLY, STR_TERRAIN_TYPE_MOUNTAINOUS, INVALID_STRING_ID};
 static const StringID _sea_lakes[]   = {STR_SEA_LEVEL_VERY_LOW, STR_SEA_LEVEL_LOW, STR_SEA_LEVEL_MEDIUM, STR_SEA_LEVEL_HIGH, STR_SEA_LEVEL_CUSTOM, INVALID_STRING_ID};
 static const StringID _rivers[]      = {STR_RIVERS_NONE, STR_RIVERS_FEW, STR_RIVERS_MODERATE, STR_RIVERS_LOT, INVALID_STRING_ID};
 static const StringID _smoothness[]  = {STR_CONFIG_SETTING_ROUGHNESS_OF_TERRAIN_VERY_SMOOTH, STR_CONFIG_SETTING_ROUGHNESS_OF_TERRAIN_SMOOTH, STR_CONFIG_SETTING_ROUGHNESS_OF_TERRAIN_ROUGH, STR_CONFIG_SETTING_ROUGHNESS_OF_TERRAIN_VERY_ROUGH, INVALID_STRING_ID};
@@ -299,6 +1056,8 @@
 static const StringID _landscape[]   = {STR_CONFIG_SETTING_LAND_GENERATOR_ORIGINAL, STR_CONFIG_SETTING_LAND_GENERATOR_TERRA_GENESIS, INVALID_STRING_ID};
 static const StringID _num_towns[]   = {STR_NUM_VERY_LOW, STR_NUM_LOW, STR_NUM_NORMAL, STR_NUM_HIGH, STR_NUM_CUSTOM, INVALID_STRING_ID};
 static const StringID _num_inds[]    = {STR_FUNDING_ONLY, STR_MINIMAL, STR_NUM_VERY_LOW, STR_NUM_LOW, STR_NUM_NORMAL, STR_NUM_HIGH, INVALID_STRING_ID};
+static const StringID _road_side[]   = {STR_GAME_OPTIONS_ROAD_VEHICLES_DROPDOWN_LEFT, STR_GAME_OPTIONS_ROAD_VEHICLES_DROPDOWN_RIGHT, INVALID_STRING_ID};
+static const StringID _town_names[]  = {STR_GAME_OPTIONS_TOWN_NAME_ORIGINAL_ENGLISH, STR_GAME_OPTIONS_TOWN_NAME_FRENCH, STR_GAME_OPTIONS_TOWN_NAME_GERMAN, STR_GAME_OPTIONS_TOWN_NAME_ADDITIONAL_ENGLISH, STR_GAME_OPTIONS_TOWN_NAME_LATIN_AMERICAN, STR_GAME_OPTIONS_TOWN_NAME_SILLY, STR_GAME_OPTIONS_TOWN_NAME_SWEDISH, STR_GAME_OPTIONS_TOWN_NAME_DUTCH, STR_GAME_OPTIONS_TOWN_NAME_FINNISH, STR_GAME_OPTIONS_TOWN_NAME_POLISH, STR_GAME_OPTIONS_TOWN_NAME_SLOVAK, STR_GAME_OPTIONS_TOWN_NAME_NORWEGIAN, STR_GAME_OPTIONS_TOWN_NAME_HUNGARIAN, STR_GAME_OPTIONS_TOWN_NAME_AUSTRIAN, STR_GAME_OPTIONS_TOWN_NAME_ROMANIAN, STR_GAME_OPTIONS_TOWN_NAME_CZECH, STR_GAME_OPTIONS_TOWN_NAME_SWISS, STR_GAME_OPTIONS_TOWN_NAME_DANISH, STR_GAME_OPTIONS_TOWN_NAME_TURKISH, STR_GAME_OPTIONS_TOWN_NAME_ITALIAN, STR_GAME_OPTIONS_TOWN_NAME_CATALAN, INVALID_STRING_ID};
 static const StringID _variety[]     = {STR_VARIETY_NONE, STR_VARIETY_VERY_LOW, STR_VARIETY_LOW, STR_VARIETY_MEDIUM, STR_VARIETY_HIGH, STR_VARIETY_VERY_HIGH, INVALID_STRING_ID};
 
 assert_compile(lengthof(_num_inds) == ID_END + 1);
@@ -324,15 +1083,12 @@
 
 		this->mode = (GenenerateLandscapeWindowMode)this->window_number;
 
-		/* Disable town, industry and trees in SE */
-		this->SetWidgetDisabledState(WID_GL_TOWN_PULLDOWN,     _game_mode == GM_EDITOR);
-		this->SetWidgetDisabledState(WID_GL_INDUSTRY_PULLDOWN, _game_mode == GM_EDITOR);
-		this->SetWidgetDisabledState(WID_GL_TREE_PULLDOWN,     _game_mode == GM_EDITOR);
-
 		this->OnInvalidateData();
 	}
 
-
+	/**
+	 * Setting values before screen display.
+	 */
 	virtual void SetStringParameters(int widget) const
 	{
 		switch (widget) {
@@ -353,9 +1109,20 @@
 				break;
 
 			case WID_GL_INDUSTRY_PULLDOWN:   SetDParam(0, _game_mode == GM_EDITOR ? STR_CONFIG_SETTING_OFF : _num_inds[_settings_newgame.difficulty.industry_density]); break;
+			case WID_GL_DRIVING_SIDE_PULLDOWN: SetDParam(0, _road_side[_settings_newgame.vehicle.road_side]); break;
+			case WID_GL_TOWN_NAMES_PULLDOWN:   SetDParam(0, _town_names[_settings_newgame.game_creation.town_name]); break;
 			case WID_GL_LANDSCAPE_PULLDOWN:  SetDParam(0, _landscape[_settings_newgame.game_creation.land_generator]); break;
 			case WID_GL_TREE_PULLDOWN:       SetDParam(0, _tree_placer[_settings_newgame.game_creation.tree_placer]); break;
-			case WID_GL_TERRAIN_PULLDOWN:    SetDParam(0, _elevations[_settings_newgame.difficulty.terrain_type]); break;
+			case WID_GL_FLAT_LAND_HEIGHT_TEXT: SetDParam(0, _settings_newgame.game_creation.se_flat_world_height); break;
+
+			case WID_GL_TERRAIN_PULLDOWN:
+				if (mode == GLWM_SCENARIO && _settings_newgame.game_creation.terrain_type_totally_flat) {
+					SetDParam(0, _elevations[0]);
+				} else {
+					SetDParam(0, _elevations[_settings_newgame.difficulty.terrain_type + 1]);
+				}
+				break;
+
 
 			case WID_GL_WATER_PULLDOWN:
 				if (_settings_newgame.difficulty.quantity_sea_lakes == CUSTOM_SEA_LEVEL_NUMBER_DIFFICULTY) {
@@ -369,6 +1136,7 @@
 			case WID_GL_RIVER_PULLDOWN:      SetDParam(0, _rivers[_settings_newgame.game_creation.amount_of_rivers]); break;
 			case WID_GL_SMOOTHNESS_PULLDOWN: SetDParam(0, _smoothness[_settings_newgame.game_creation.tgen_smoothness]); break;
 			case WID_GL_VARIETY_PULLDOWN:    SetDParam(0, _variety[_settings_newgame.game_creation.variety]); break;
+			case WID_GL_ADVANCED_TEXT_PLUS_MIN:      SetDParam(0, (_settings_newgame.game_creation.advanced_settings == false) ? STR_MAPGEN_ADVANCED_PLUS : STR_MAPGEN_ADVANCED_MIN); break;
 			case WID_GL_BORDERS_RANDOM:      SetDParam(0, (_settings_newgame.game_creation.water_borders == BORDERS_RANDOM) ? STR_MAPGEN_BORDER_RANDOMIZE : STR_MAPGEN_BORDER_MANUAL); break;
 			case WID_GL_WATER_NE: SetDParam(0, (_settings_newgame.game_creation.water_borders == BORDERS_RANDOM) ? STR_MAPGEN_BORDER_RANDOM : HasBit(_settings_newgame.game_creation.water_borders, BORDER_NE) ? STR_MAPGEN_BORDER_WATER : STR_MAPGEN_BORDER_FREEFORM); break;
 			case WID_GL_WATER_NW: SetDParam(0, (_settings_newgame.game_creation.water_borders == BORDERS_RANDOM) ? STR_MAPGEN_BORDER_RANDOM : HasBit(_settings_newgame.game_creation.water_borders, BORDER_NW) ? STR_MAPGEN_BORDER_WATER : STR_MAPGEN_BORDER_FREEFORM); break;
@@ -396,16 +1164,55 @@
 	virtual void OnInvalidateData(int data = 0, bool gui_scope = true)
 	{
 		if (!gui_scope) return;
+
+		this->SetWidgetLoweredState(WID_GL_NEW_MAP, mode != GLWM_SCENARIO);
+
 		/* Update the climate buttons */
 		this->SetWidgetLoweredState(WID_GL_TEMPERATE, _settings_newgame.game_creation.landscape == LT_TEMPERATE);
 		this->SetWidgetLoweredState(WID_GL_ARCTIC,    _settings_newgame.game_creation.landscape == LT_ARCTIC);
 		this->SetWidgetLoweredState(WID_GL_TROPICAL,  _settings_newgame.game_creation.landscape == LT_TROPIC);
 		this->SetWidgetLoweredState(WID_GL_TOYLAND,   _settings_newgame.game_creation.landscape == LT_TOYLAND);
 
-		/* You can't select smoothness / non-water borders if not terragenesis */
-		if (mode == GLWM_GENERATE) {
+		/* Update availability of decreasing / increasing start date ,snow and flatland level */
+		this->SetWidgetDisabledState(WID_GL_START_DATE_DOWN, _settings_newgame.game_creation.starting_year <= MIN_YEAR);
+		this->SetWidgetDisabledState(WID_GL_START_DATE_UP,   _settings_newgame.game_creation.starting_year >= MAX_YEAR);
+
+		/* Disable snowline if not arctic */
+		this->SetWidgetDisabledState(WID_GL_SNOW_LEVEL_TEXT, _settings_newgame.game_creation.landscape != LT_ARCTIC);
+		this->SetWidgetDisabledState(WID_GL_SNOW_LEVEL_DOWN, _settings_newgame.game_creation.snow_line_height <= MIN_SNOWLINE_HEIGHT || _settings_newgame.game_creation.landscape != LT_ARCTIC);
+		this->SetWidgetDisabledState(WID_GL_SNOW_LEVEL_UP,   _settings_newgame.game_creation.snow_line_height >= MAX_SNOWLINE_HEIGHT || _settings_newgame.game_creation.landscape != LT_ARCTIC);
+
+		if (_settings_newgame.game_creation.advanced_settings) {
+			/* You can only change the drive side if you are in the menu or ingame with
+			 * no vehicles present. In a networking game only the server can change it */
+			this->SetWidgetDisabledState(WID_GL_DRIVING_SIDE_PULLDOWN, (_game_mode != GM_MENU || _networking && !_network_server));
+		}
+
+		if (mode == GLWM_GENERATE || mode == GLWM_SCENARIO) {
+
+			/* Handle widgets in totally for flat land screen */
+			if (mode == GLWM_SCENARIO && _settings_newgame.game_creation.terrain_type_totally_flat) {
+				if (_settings_newgame.game_creation.advanced_settings) {
+					this->SetWidgetDisabledState(WID_GL_FLAT_LAND_HEIGHT_DOWN, _settings_newgame.game_creation.se_flat_world_height <= 0);
+					this->SetWidgetDisabledState(WID_GL_FLAT_LAND_HEIGHT_UP,   _settings_newgame.game_creation.se_flat_world_height >= MAX_TILE_HEIGHT);
+				}
+				return;
+			}
+
+			/* You can't select smoothness / non-water with the original land generator. */
 			this->SetWidgetDisabledState(WID_GL_SMOOTHNESS_PULLDOWN, _settings_newgame.game_creation.land_generator == 0);
+			this->SetWidgetsDisabledState(_settings_newgame.game_creation.land_generator == 0 && (_settings_newgame.game_creation.landscape == LT_ARCTIC || _settings_newgame.game_creation.landscape == LT_TROPIC),
+					WID_GL_TERRAIN_PULLDOWN, WID_GL_WATER_PULLDOWN, WIDGET_LIST_END);
+
+			/* Do not allow a custom sea level with the original land generator. */
+			if (_settings_newgame.game_creation.land_generator == 0 &&
+					_settings_newgame.difficulty.quantity_sea_lakes == CUSTOM_SEA_LEVEL_NUMBER_DIFFICULTY) {
+				_settings_newgame.difficulty.quantity_sea_lakes = CUSTOM_SEA_LEVEL_MIN_PERCENTAGE;
+			}
+
+			if (_settings_newgame.game_creation.advanced_settings) {
 			this->SetWidgetDisabledState(WID_GL_VARIETY_PULLDOWN, _settings_newgame.game_creation.land_generator == 0);
+
 			this->SetWidgetDisabledState(WID_GL_BORDERS_RANDOM, _settings_newgame.game_creation.land_generator == 0 || !_settings_newgame.construction.freeform_edges);
 			this->SetWidgetsDisabledState(_settings_newgame.game_creation.land_generator == 0 || !_settings_newgame.construction.freeform_edges || _settings_newgame.game_creation.water_borders == BORDERS_RANDOM,
 					WID_GL_WATER_NW, WID_GL_WATER_NE, WID_GL_WATER_SE, WID_GL_WATER_SW, WIDGET_LIST_END);
@@ -416,26 +1223,8 @@
 			this->SetWidgetLoweredState(WID_GL_WATER_NE, HasBit(_settings_newgame.game_creation.water_borders, BORDER_NE));
 			this->SetWidgetLoweredState(WID_GL_WATER_SE, HasBit(_settings_newgame.game_creation.water_borders, BORDER_SE));
 			this->SetWidgetLoweredState(WID_GL_WATER_SW, HasBit(_settings_newgame.game_creation.water_borders, BORDER_SW));
-
-			this->SetWidgetsDisabledState(_settings_newgame.game_creation.land_generator == 0 && (_settings_newgame.game_creation.landscape == LT_ARCTIC || _settings_newgame.game_creation.landscape == LT_TROPIC),
-					WID_GL_TERRAIN_PULLDOWN, WID_GL_WATER_PULLDOWN, WIDGET_LIST_END);
 		}
-
-		/* Disable snowline if not arctic */
-		this->SetWidgetDisabledState(WID_GL_SNOW_LEVEL_TEXT, _settings_newgame.game_creation.landscape != LT_ARCTIC);
-
-		/* Update availability of decreasing / increasing start date and snow level */
-		this->SetWidgetDisabledState(WID_GL_START_DATE_DOWN, _settings_newgame.game_creation.starting_year <= MIN_YEAR);
-		this->SetWidgetDisabledState(WID_GL_START_DATE_UP,   _settings_newgame.game_creation.starting_year >= MAX_YEAR);
-		this->SetWidgetDisabledState(WID_GL_SNOW_LEVEL_DOWN, _settings_newgame.game_creation.snow_line_height <= MIN_SNOWLINE_HEIGHT || _settings_newgame.game_creation.landscape != LT_ARCTIC);
-		this->SetWidgetDisabledState(WID_GL_SNOW_LEVEL_UP,   _settings_newgame.game_creation.snow_line_height >= MAX_SNOWLINE_HEIGHT || _settings_newgame.game_creation.landscape != LT_ARCTIC);
-
-		/* Do not allow a custom sea level with the original land generator. */
-		if (_settings_newgame.game_creation.land_generator == 0 &&
-				_settings_newgame.difficulty.quantity_sea_lakes == CUSTOM_SEA_LEVEL_NUMBER_DIFFICULTY) {
-			_settings_newgame.difficulty.quantity_sea_lakes = CUSTOM_SEA_LEVEL_MIN_PERCENTAGE;
 		}
-
 	}
 
 	virtual void UpdateWidgetSize(int widget, Dimension *size, const Dimension &padding, Dimension *fill, Dimension *resize)
@@ -453,6 +1242,11 @@
 				*size = GetStringBoundingBox(STR_JUST_INT);
 				break;
 
+			case WID_GL_FLAT_LAND_HEIGHT_TEXT:
+				SetDParam(0, MAX_TILE_HEIGHT);
+				*size = GetStringBoundingBox(STR_JUST_INT);
+				break;
+
 			case WID_GL_SNOW_LEVEL_TEXT:
 				SetDParam(0, MAX_TILE_HEIGHT);
 				*size = GetStringBoundingBox(STR_JUST_INT);
@@ -471,6 +1265,8 @@
 				break;
 
 			case WID_GL_INDUSTRY_PULLDOWN:   strs = _num_inds; break;
+			case WID_GL_DRIVING_SIDE_PULLDOWN:       strs = _road_side; break;
+			case WID_GL_TOWN_NAMES_PULLDOWN:         strs = _town_names; break; // @todo alphabethic order
 			case WID_GL_LANDSCAPE_PULLDOWN:  strs = _landscape; break;
 			case WID_GL_TREE_PULLDOWN:       strs = _tree_placer; break;
 			case WID_GL_TERRAIN_PULLDOWN:    strs = _elevations; break;
@@ -524,12 +1320,40 @@
 	virtual void OnPaint()
 	{
 		this->DrawWidgets();
-		this->DrawEditBox(WID_GL_RANDOM_EDITBOX);
 	}
 
 	virtual void OnClick(Point pt, int widget, int click_count)
 	{
 		switch (widget) {
+
+			case WID_GL_NEW_MAP:
+				if (_call_mode == GLWM_SCENARIO) {
+					StartScenarioEditor();
+				} else {
+					ShowGenerateLandscape();
+				}
+				break;
+
+			case WID_GL_SCENARIO:
+				if (!(this->flags & WF_TIMEOUT) || this->timeout_timer <= 1) {
+					this->HandleButtonClick(widget);
+					this->InvalidateData();
+				}
+				_left_button_clicked = false;
+				if (_call_mode == GLWM_SCENARIO) _game_mode = GM_EDITOR; // hack!!
+				ShowSaveLoadDialog(SLD_LOAD_SCENARIO);
+				break;
+
+			case WID_GL_HEIGHT_MAP: {
+				if (!(this->flags & WF_TIMEOUT) || this->timeout_timer <= 1) {
+					this->HandleButtonClick(widget);
+					this->InvalidateData();
+				}
+				_left_button_clicked = false;
+				ShowSaveLoadDialog(SLD_LOAD_HEIGHTMAP);
+				break;
+			}
+
 			case WID_GL_TEMPERATE:
 			case WID_GL_ARCTIC:
 			case WID_GL_TROPICAL:
@@ -553,11 +1377,12 @@
 				ShowDropDownMenu(this, _num_inds, _settings_newgame.difficulty.industry_density, WID_GL_INDUSTRY_PULLDOWN, 0, 0);
 				break;
 
-			case WID_GL_RANDOM_BUTTON: // Random seed
-				_settings_newgame.game_creation.generation_seed = InteractiveRandom();
-				snprintf(this->edit_str_buf, this->edit_str_size, "%u", _settings_newgame.game_creation.generation_seed);
-				this->text.UpdateSize();
-				this->SetDirty();
+			case WID_GL_DRIVING_SIDE_PULLDOWN: // Driving side
+				ShowDropDownMenu(this, _road_side, _settings_newgame.vehicle.road_side, WID_GL_DRIVING_SIDE_PULLDOWN, 0, 0);
+				break;
+
+			case WID_GL_TOWN_NAMES_PULLDOWN: // Town name language
+				ShowDropDownMenu(this, _town_names, _settings_newgame.game_creation.town_name, WID_GL_TOWN_NAMES_PULLDOWN, 0, 0);
 				break;
 
 			case WID_GL_GENERATE_BUTTON: { // Generate
@@ -605,6 +1430,24 @@
 				ShowQueryString(STR_JUST_INT, STR_MAPGEN_START_DATE_QUERY_CAPT, 8, this, CS_NUMERAL, QSF_ENABLE_DEFAULT);
 				break;
 
+			case WID_GL_FLAT_LAND_HEIGHT_DOWN:
+			case WID_GL_FLAT_LAND_HEIGHT_UP: // Height level buttons
+				/* Don't allow too fast scrolling */
+				if (!(this->flags & WF_TIMEOUT) || this->timeout_timer <= 1) {
+					this->HandleButtonClick(widget);
+
+					_settings_newgame.game_creation.se_flat_world_height = Clamp(_settings_newgame.game_creation.se_flat_world_height + widget - WID_GL_FLAT_LAND_HEIGHT_TEXT, 0, MAX_TILE_HEIGHT);
+					this->InvalidateData();
+				}
+				_left_button_clicked = false;
+				break;
+
+			case WID_GL_FLAT_LAND_HEIGHT_TEXT: // Height level text
+				this->widget_id = WID_GL_FLAT_LAND_HEIGHT_TEXT;
+				SetDParam(0, _settings_newgame.game_creation.se_flat_world_height);
+				ShowQueryString(STR_JUST_INT, STR_SE_MAPGEN_FLAT_WORLD_HEIGHT_QUERY_CAPT, 3, this, CS_NUMERAL, QSF_NONE);
+				break;
+
 			case WID_GL_SNOW_LEVEL_DOWN:
 			case WID_GL_SNOW_LEVEL_UP: // Snow line buttons
 				/* Don't allow too fast scrolling */
@@ -635,9 +1478,17 @@
 				ShowDropDownMenu(this, _rotation, _settings_newgame.game_creation.heightmap_rotation, WID_GL_HEIGHTMAP_ROTATION_PULLDOWN, 0, 0);
 				break;
 
-			case WID_GL_TERRAIN_PULLDOWN: // Terrain type
-				ShowDropDownMenu(this, _elevations, _settings_newgame.difficulty.terrain_type, WID_GL_TERRAIN_PULLDOWN, 0, 0);
+			case WID_GL_TERRAIN_PULLDOWN: { // Terrain type
+				uint32 hidden_mask = 0;
+				byte setting = _settings_newgame.difficulty.terrain_type + 1;
+				if (mode == GLWM_SCENARIO) {
+					if (_settings_newgame.game_creation.terrain_type_totally_flat == true) setting = 0; // Highlight 'Totally flat'
+				} else {
+					SetBit(hidden_mask, 0); // Hide 'Totally flat' if not in scenario editor.
+				}
+				ShowDropDownMenu(this, _elevations, setting, WID_GL_TERRAIN_PULLDOWN, 0, hidden_mask);
 				break;
+			}
 
 			case WID_GL_WATER_PULLDOWN: { // Water quantity
 				uint32 hidden_mask = 0;
@@ -686,13 +1537,30 @@
 				_settings_newgame.game_creation.water_borders = (_settings_newgame.game_creation.water_borders == BORDERS_RANDOM) ? 0 : BORDERS_RANDOM;
 				this->InvalidateData();
 				break;
+
+			case WID_GL_ADVANCED_TEXT_PLUS_MIN:
+				_settings_newgame.game_creation.advanced_settings = _settings_newgame.game_creation.advanced_settings ? false : true;
+
+				switch (mode) {
+					case GLWM_GENERATE:  ShowGenerateLandscape(); break;
+					case GLWM_HEIGHTMAP: ShowHeightmapLoad();     break;
+					case GLWM_SCENARIO:  StartScenarioEditor();   break;
+				}
+				break;
 		}
 	}
 
 	virtual void OnTimeout()
 	{
-		static const int raise_widgets[] = {WID_GL_START_DATE_DOWN, WID_GL_START_DATE_UP, WID_GL_SNOW_LEVEL_UP, WID_GL_SNOW_LEVEL_DOWN, WIDGET_LIST_END};
+		static const int raise_widgets[] = {WID_GL_SCENARIO, WID_GL_HEIGHT_MAP, WID_GL_START_DATE_DOWN, WID_GL_START_DATE_UP, WID_GL_FLAT_LAND_HEIGHT_DOWN, WID_GL_FLAT_LAND_HEIGHT_UP, WID_GL_SNOW_LEVEL_UP, WID_GL_SNOW_LEVEL_DOWN, WIDGET_LIST_END};
 		for (const int *widget = raise_widgets; *widget != WIDGET_LIST_END; widget++) {
+			/* Do not iterate over non used widgets */
+			if (!(mode == GLWM_SCENARIO &&
+					_settings_newgame.game_creation.advanced_settings &&
+					_settings_newgame.game_creation.terrain_type_totally_flat)) {
+				if (*widget == WID_GL_FLAT_LAND_HEIGHT_DOWN || *widget == WID_GL_FLAT_LAND_HEIGHT_UP) continue;
+			}
+
 			if (this->IsWidgetLowered(*widget)) {
 				this->RaiseWidget(*widget);
 				this->SetWidgetDirty(*widget);
@@ -700,23 +1568,6 @@
 		}
 	}
 
-	virtual void OnMouseLoop()
-	{
-		this->HandleEditBox(WID_GL_RANDOM_EDITBOX);
-	}
-
-	virtual EventState OnKeyPress(uint16 key, uint16 keycode)
-	{
-		EventState state = ES_NOT_HANDLED;
-		this->HandleEditBoxKey(WID_GL_RANDOM_EDITBOX, key, keycode, state);
-		/* the seed is unsigned, therefore atoi cannot be used.
-		 * As UINT32_MAX is a 'magic' value (use random seed) it
-		 * should not be possible to be entered into the input
-		 * field; the generate seed button can be used instead. */
-		_settings_newgame.game_creation.generation_seed = minu(strtoul(this->edit_str_buf, NULL, 10), UINT32_MAX - 1);
-		return state;
-	}
-
 	virtual void OnDropdownSelect(int widget, int index)
 	{
 		switch (widget) {
@@ -728,6 +1579,7 @@
 			case WID_GL_VARIETY_PULLDOWN:       _settings_newgame.game_creation.variety = index; break;
 			case WID_GL_LANDSCAPE_PULLDOWN:     _settings_newgame.game_creation.land_generator = index; break;
 			case WID_GL_HEIGHTMAP_ROTATION_PULLDOWN: _settings_newgame.game_creation.heightmap_rotation = index; break;
+			case WID_GL_TOWN_NAMES_PULLDOWN:         _settings_newgame.game_creation.town_name = index; break;
 
 			case WID_GL_TOWN_PULLDOWN:
 				if ((uint)index == CUSTOM_TOWN_NUMBER_DIFFICULTY) {
@@ -742,11 +1594,25 @@
 				IConsoleSetSetting("difficulty.industry_density", index);
 				break;
 
+			case WID_GL_DRIVING_SIDE_PULLDOWN:
+				IConsoleSetSetting("vehicle.road_side", index);
+				break;
+
 			case WID_GL_TERRAIN_PULLDOWN: {
+				bool old_value = _settings_newgame.game_creation.terrain_type_totally_flat;
+				if (index == 0){
+					_settings_newgame.game_creation.terrain_type_totally_flat = true; // 'Totally flat' was chosen
+				} else {
+					_settings_newgame.game_creation.terrain_type_totally_flat = false;
 				GameMode old_gm = _game_mode;
 				_game_mode = GM_MENU;
-				IConsoleSetSetting("difficulty.terrain_type", index);
+					IConsoleSetSetting("difficulty.terrain_type", index - 1); // Less 1 to compensate for extra option 'Totally flat' that is not part of difficulty.terrain_type
 				_game_mode = old_gm;
+				}
+				if (old_value != _settings_newgame.game_creation.terrain_type_totally_flat) { // flip screen ATT!! not sure if done corect here please check
+					StartScenarioEditor();
+					return;
+				}
 				break;
 			}
 
@@ -796,6 +1662,11 @@
 				_settings_newgame.game_creation.snow_line_height = Clamp(value, MIN_SNOWLINE_HEIGHT, MAX_SNOWLINE_HEIGHT);
 				break;
 
+			case WID_GL_FLAT_LAND_HEIGHT_TEXT:
+				this->SetWidgetDirty(WID_GL_FLAT_LAND_HEIGHT_TEXT);
+				_settings_newgame.game_creation.se_flat_world_height = Clamp(value, 0, MAX_TILE_HEIGHT);
+				break;
+
 			case WID_GL_TOWN_PULLDOWN:
 				_settings_newgame.game_creation.custom_town_number = Clamp(value, 1, CUSTOM_TOWN_MAX_NUMBER);
 				break;
@@ -809,18 +1680,60 @@
 	}
 };
 
-static const WindowDesc _generate_landscape_desc(
+static const WindowDesc _generate_landscape_plus_desc( // new world generator "advanced+".
 	WDP_CENTER, 0, 0,
 	WC_GENERATE_LANDSCAPE, WC_NONE,
 	0,
-	_nested_generate_landscape_widgets, lengthof(_nested_generate_landscape_widgets)
+	_nested_generate_landscape_widgets_plus, lengthof(_nested_generate_landscape_widgets_plus)
 );
 
-static const WindowDesc _heightmap_load_desc(
+static const WindowDesc _generate_landscape_minus_desc( // new world generator "advanced-".
 	WDP_CENTER, 0, 0,
 	WC_GENERATE_LANDSCAPE, WC_NONE,
 	0,
-	_nested_heightmap_load_widgets, lengthof(_nested_heightmap_load_widgets)
+	_nested_generate_landscape_widgets_minus, lengthof(_nested_generate_landscape_widgets_minus)
+);
+
+static const WindowDesc _generate_landscape_se_plus_desc( // Scenario editor "advanced+".
+	WDP_CENTER, 0, 0,
+	WC_GENERATE_LANDSCAPE, WC_NONE,
+	0,
+	_nested_generate_landscape_se_widgets_plus, lengthof(_nested_generate_landscape_se_widgets_plus)
+);
+
+static const WindowDesc _generate_landscape_se_minus_desc( // Scenario editor "advanced-".
+	WDP_CENTER, 0, 0,
+	WC_GENERATE_LANDSCAPE, WC_NONE,
+	0,
+	_nested_generate_landscape_se_widgets_minus, lengthof(_nested_generate_landscape_se_widgets_minus)
+);
+
+static const WindowDesc _generate_landscape_flat_plus_desc( // Scenario editor "advanced+".
+	WDP_CENTER, 0, 0,
+	WC_GENERATE_LANDSCAPE, WC_NONE,
+	0,
+	_nested_generate_landscape_flat_widgets_plus, lengthof(_nested_generate_landscape_flat_widgets_plus)
+);
+
+static const WindowDesc _generate_landscape_flat_minus_desc( // Scenario editor "advanced-".
+	WDP_CENTER, 0, 0,
+	WC_GENERATE_LANDSCAPE, WC_NONE,
+	0,
+	_nested_generate_landscape_flat_widgets_minus, lengthof(_nested_generate_landscape_flat_widgets_minus)
+);
+
+static const WindowDesc _heightmap_load_plus_desc( // load heightmap "advanced+".
+	WDP_CENTER, 0, 0,
+	WC_GENERATE_LANDSCAPE, WC_NONE,
+	0,
+	_nested_heightmap_load_widgets_plus, lengthof(_nested_heightmap_load_widgets_plus)
+);
+
+static const WindowDesc _heightmap_load_minus_desc( // load heightmap "advanced-".
+	WDP_CENTER, 0, 0,
+	WC_GENERATE_LANDSCAPE, WC_NONE,
+	0,
+	_nested_heightmap_load_widgets_minus, lengthof(_nested_heightmap_load_widgets_minus)
 );
 
 static void _ShowGenerateLandscape(GenenerateLandscapeWindowMode mode)
@@ -830,15 +1743,45 @@
 
 	DeleteWindowByClass(WC_GENERATE_LANDSCAPE);
 
-	/* Always give a new seed if not editor */
-	if (_game_mode != GM_EDITOR) _settings_newgame.game_creation.generation_seed = InteractiveRandom();
+	/* Always give a new seed */
+	_settings_newgame.game_creation.generation_seed = InteractiveRandom();
 
 	if (mode == GLWM_HEIGHTMAP) {
 		/* If the function returns negative, it means there was a problem loading the heightmap */
 		if (!GetHeightmapDimensions(_file_to_saveload.name, &x, &y)) return;
 	}
 
-	GenerateLandscapeWindow *w = AllocateWindowDescFront<GenerateLandscapeWindow>((mode == GLWM_HEIGHTMAP) ? &_heightmap_load_desc : &_generate_landscape_desc, mode);
+	const WindowDesc *window_description;
+
+		if (mode == GLWM_GENERATE) {
+			if (_settings_newgame.game_creation.advanced_settings == true) {
+				window_description = &_generate_landscape_plus_desc;
+			} else {
+				window_description = &_generate_landscape_minus_desc;
+			}
+		} else if (mode == GLWM_SCENARIO) {
+			if (_settings_newgame.game_creation.advanced_settings == true) {
+				if (_settings_newgame.game_creation.terrain_type_totally_flat == true) {
+					window_description = &_generate_landscape_flat_plus_desc;
+				} else {
+					window_description = &_generate_landscape_se_plus_desc;
+				}
+			} else {
+				if (_settings_newgame.game_creation.terrain_type_totally_flat == true) {
+					window_description = &_generate_landscape_flat_minus_desc;
+				} else {
+					window_description = &_generate_landscape_se_minus_desc;
+				}
+			}
+		} else if (mode == GLWM_HEIGHTMAP) {
+			if (_settings_newgame.game_creation.advanced_settings == true) {
+				window_description = &_heightmap_load_plus_desc;
+			} else {
+				window_description = &_heightmap_load_minus_desc;
+			}
+		}
+
+	GenerateLandscapeWindow *w = AllocateWindowDescFront<GenerateLandscapeWindow>(window_description, mode);
 
 	if (mode == GLWM_HEIGHTMAP) {
 		w->x = x;
@@ -852,7 +1795,8 @@
 /** Start with a normal game. */
 void ShowGenerateLandscape()
 {
-	_ShowGenerateLandscape(GLWM_GENERATE);
+	_call_mode = GLWM_GENERATE;
+	_ShowGenerateLandscape(_call_mode);
 }
 
 /** Start with loading a heightmap. */
@@ -864,7 +1808,8 @@
 /** Start with a scenario editor. */
 void StartScenarioEditor()
 {
-	StartGeneratingLandscape(GLWM_SCENARIO);
+	_call_mode = GLWM_SCENARIO;
+	_ShowGenerateLandscape(_call_mode);
 }
 
 /**
@@ -879,251 +1824,6 @@
 	StartGeneratingLandscape(GLWM_GENERATE);
 }
 
-struct CreateScenarioWindow : public Window
-{
-	uint widget_id;
-
-	CreateScenarioWindow(const WindowDesc *desc, WindowNumber window_number) : Window()
-	{
-		this->InitNested(desc, window_number);
-		this->LowerWidget(_settings_newgame.game_creation.landscape + WID_CS_TEMPERATE);
-	}
-
-	virtual void SetStringParameters(int widget) const
-	{
-		switch (widget) {
-			case WID_CS_START_DATE_TEXT:
-				SetDParam(0, ConvertYMDToDate(_settings_newgame.game_creation.starting_year, 0, 1));
-				break;
-
-			case WID_CS_MAPSIZE_X_PULLDOWN:
-				SetDParam(0, 1 << _settings_newgame.game_creation.map_x);
-				break;
-
-			case WID_CS_MAPSIZE_Y_PULLDOWN:
-				SetDParam(0, 1 << _settings_newgame.game_creation.map_y);
-				break;
-
-			case WID_CS_FLAT_LAND_HEIGHT_TEXT:
-				SetDParam(0, _settings_newgame.game_creation.se_flat_world_height);
-				break;
-		}
-	}
-
-	virtual void OnPaint()
-	{
-		this->SetWidgetDisabledState(WID_CS_START_DATE_DOWN,       _settings_newgame.game_creation.starting_year <= MIN_YEAR);
-		this->SetWidgetDisabledState(WID_CS_START_DATE_UP,         _settings_newgame.game_creation.starting_year >= MAX_YEAR);
-		this->SetWidgetDisabledState(WID_CS_FLAT_LAND_HEIGHT_DOWN, _settings_newgame.game_creation.se_flat_world_height <= 0);
-		this->SetWidgetDisabledState(WID_CS_FLAT_LAND_HEIGHT_UP,   _settings_newgame.game_creation.se_flat_world_height >= MAX_TILE_HEIGHT);
-
-		this->SetWidgetLoweredState(WID_CS_TEMPERATE, _settings_newgame.game_creation.landscape == LT_TEMPERATE);
-		this->SetWidgetLoweredState(WID_CS_ARCTIC,    _settings_newgame.game_creation.landscape == LT_ARCTIC);
-		this->SetWidgetLoweredState(WID_CS_TROPICAL,  _settings_newgame.game_creation.landscape == LT_TROPIC);
-		this->SetWidgetLoweredState(WID_CS_TOYLAND,   _settings_newgame.game_creation.landscape == LT_TOYLAND);
-
-		this->DrawWidgets();
-	}
-
-	virtual void UpdateWidgetSize(int widget, Dimension *size, const Dimension &padding, Dimension *fill, Dimension *resize)
-	{
-		StringID str = STR_JUST_INT;
-		switch (widget) {
-			case WID_CS_START_DATE_TEXT:
-				SetDParam(0, ConvertYMDToDate(MAX_YEAR, 0, 1));
-				str = STR_BLACK_DATE_LONG;
-				break;
-
-			case WID_CS_MAPSIZE_X_PULLDOWN:
-			case WID_CS_MAPSIZE_Y_PULLDOWN:
-				SetDParam(0, MAX_MAP_SIZE);
-				break;
-
-			case WID_CS_FLAT_LAND_HEIGHT_TEXT:
-				SetDParam(0, MAX_TILE_HEIGHT);
-				break;
-
-			default:
-				return;
-		}
-		*size = GetStringBoundingBox(str);
-		size->width += padding.width;
-		size->height += padding.height;
-	}
-
-	virtual void OnClick(Point pt, int widget, int click_count)
-	{
-		switch (widget) {
-			case WID_CS_TEMPERATE:
-			case WID_CS_ARCTIC:
-			case WID_CS_TROPICAL:
-			case WID_CS_TOYLAND:
-				this->RaiseWidget(_settings_newgame.game_creation.landscape + WID_CS_TEMPERATE);
-				SetNewLandscapeType(widget - WID_CS_TEMPERATE);
-				break;
-
-			case WID_CS_MAPSIZE_X_PULLDOWN: // Mapsize X
-				ShowDropDownList(this, BuildMapsizeDropDown(), _settings_newgame.game_creation.map_x, WID_CS_MAPSIZE_X_PULLDOWN);
-				break;
-
-			case WID_CS_MAPSIZE_Y_PULLDOWN: // Mapsize Y
-				ShowDropDownList(this, BuildMapsizeDropDown(), _settings_newgame.game_creation.map_y, WID_CS_MAPSIZE_Y_PULLDOWN);
-				break;
-
-			case WID_CS_EMPTY_WORLD: // Empty world / flat world
-				StartGeneratingLandscape(GLWM_SCENARIO);
-				break;
-
-			case WID_CS_RANDOM_WORLD: // Generate
-				ShowGenerateLandscape();
-				break;
-
-			case WID_CS_START_DATE_DOWN:
-			case WID_CS_START_DATE_UP: // Year buttons
-				/* Don't allow too fast scrolling */
-				if (!(this->flags & WF_TIMEOUT) || this->timeout_timer <= 1) {
-					this->HandleButtonClick(widget);
-					this->SetDirty();
-
-					_settings_newgame.game_creation.starting_year = Clamp(_settings_newgame.game_creation.starting_year + widget - WID_CS_START_DATE_TEXT, MIN_YEAR, MAX_YEAR);
-				}
-				_left_button_clicked = false;
-				break;
-
-			case WID_CS_START_DATE_TEXT: // Year text
-				this->widget_id = WID_CS_START_DATE_TEXT;
-				SetDParam(0, _settings_newgame.game_creation.starting_year);
-				ShowQueryString(STR_JUST_INT, STR_MAPGEN_START_DATE_QUERY_CAPT, 8, this, CS_NUMERAL, QSF_NONE);
-				break;
-
-			case WID_CS_FLAT_LAND_HEIGHT_DOWN:
-			case WID_CS_FLAT_LAND_HEIGHT_UP: // Height level buttons
-				/* Don't allow too fast scrolling */
-				if (!(this->flags & WF_TIMEOUT) || this->timeout_timer <= 1) {
-					this->HandleButtonClick(widget);
-					this->SetDirty();
-
-					_settings_newgame.game_creation.se_flat_world_height = Clamp(_settings_newgame.game_creation.se_flat_world_height + widget - WID_CS_FLAT_LAND_HEIGHT_TEXT, 0, MAX_TILE_HEIGHT);
-				}
-				_left_button_clicked = false;
-				break;
-
-			case WID_CS_FLAT_LAND_HEIGHT_TEXT: // Height level text
-				this->widget_id = WID_CS_FLAT_LAND_HEIGHT_TEXT;
-				SetDParam(0, _settings_newgame.game_creation.se_flat_world_height);
-				ShowQueryString(STR_JUST_INT, STR_SE_MAPGEN_FLAT_WORLD_HEIGHT_QUERY_CAPT, 3, this, CS_NUMERAL, QSF_NONE);
-				break;
-		}
-	}
-
-	virtual void OnTimeout()
-	{
-		static const int raise_widgets[] = {WID_CS_START_DATE_DOWN, WID_CS_START_DATE_UP, WID_CS_FLAT_LAND_HEIGHT_DOWN, WID_CS_FLAT_LAND_HEIGHT_UP, WIDGET_LIST_END};
-		for (const int *widget = raise_widgets; *widget != WIDGET_LIST_END; widget++) {
-			if (this->IsWidgetLowered(*widget)) {
-				this->RaiseWidget(*widget);
-				this->SetWidgetDirty(*widget);
-			}
-		}
-	}
-
-	virtual void OnDropdownSelect(int widget, int index)
-	{
-		switch (widget) {
-			case WID_CS_MAPSIZE_X_PULLDOWN: _settings_newgame.game_creation.map_x = index; break;
-			case WID_CS_MAPSIZE_Y_PULLDOWN: _settings_newgame.game_creation.map_y = index; break;
-		}
-		this->SetDirty();
-	}
-
-	virtual void OnQueryTextFinished(char *str)
-	{
-		if (!StrEmpty(str)) {
-			int32 value = atoi(str);
-
-			switch (this->widget_id) {
-				case WID_CS_START_DATE_TEXT:
-					this->SetWidgetDirty(WID_CS_START_DATE_TEXT);
-					_settings_newgame.game_creation.starting_year = Clamp(value, MIN_YEAR, MAX_YEAR);
-					break;
-
-				case WID_CS_FLAT_LAND_HEIGHT_TEXT:
-					this->SetWidgetDirty(WID_CS_FLAT_LAND_HEIGHT_TEXT);
-					_settings_newgame.game_creation.se_flat_world_height = Clamp(value, 0, MAX_TILE_HEIGHT);
-					break;
-			}
-
-			this->SetDirty();
-		}
-	}
-};
-
-static const NWidgetPart _nested_create_scenario_widgets[] = {
-	NWidget(NWID_HORIZONTAL),
-		NWidget(WWT_CLOSEBOX, COLOUR_BROWN),
-		NWidget(WWT_CAPTION, COLOUR_BROWN), SetDataTip(STR_SE_MAPGEN_CAPTION, STR_NULL),
-	EndContainer(),
-	NWidget(WWT_PANEL, COLOUR_BROWN),
-		NWidget(NWID_SPACER), SetMinimalSize(0, 10),
-		/* Landscape style selection. */
-		NWidget(NWID_HORIZONTAL), SetPIP(10, 3, 10),
-			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_CS_TEMPERATE), SetDataTip(SPR_SELECT_TEMPERATE, STR_INTRO_TOOLTIP_TEMPERATE),
-			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_CS_ARCTIC), SetDataTip(SPR_SELECT_SUB_ARCTIC, STR_INTRO_TOOLTIP_SUB_ARCTIC_LANDSCAPE),
-			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_CS_TROPICAL), SetDataTip(SPR_SELECT_SUB_TROPICAL, STR_INTRO_TOOLTIP_SUB_TROPICAL_LANDSCAPE),
-			NWidget(WWT_IMGBTN_2, COLOUR_ORANGE, WID_CS_TOYLAND), SetDataTip(SPR_SELECT_TOYLAND, STR_INTRO_TOOLTIP_TOYLAND_LANDSCAPE),
-		EndContainer(),
-		NWidget(NWID_HORIZONTAL), SetPIP(10, 8, 10),
-			/* Green generation type buttons: 'Flat land' and 'Random land'. */
-			NWidget(NWID_VERTICAL), SetPIP(10, 6, 10),
-				NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_CS_EMPTY_WORLD), SetDataTip(STR_SE_MAPGEN_FLAT_WORLD, STR_SE_MAPGEN_FLAT_WORLD_TOOLTIP), SetFill(1, 1),
-				NWidget(WWT_TEXTBTN, COLOUR_GREEN, WID_CS_RANDOM_WORLD), SetDataTip(STR_SE_MAPGEN_RANDOM_LAND, STR_TERRAFORM_TOOLTIP_GENERATE_RANDOM_LAND), SetFill(1, 1),
-			EndContainer(),
-			/* Labels + setting drop-downs */
-			NWidget(NWID_VERTICAL), SetPIP(10, 6, 10),
-				/* Map size. */
-				NWidget(NWID_HORIZONTAL),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_MAPSIZE, STR_NULL), SetPadding(1, 0, 0, 0),
-					NWidget(NWID_SPACER), SetMinimalSize(6, 0), SetFill(1, 0),
-					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_CS_MAPSIZE_X_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL), SetPadding(0, 4, 0, 0),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_BY, STR_NULL), SetPadding(1, 2, 0, 0),
-					NWidget(WWT_DROPDOWN, COLOUR_ORANGE, WID_CS_MAPSIZE_Y_PULLDOWN), SetDataTip(STR_JUST_INT, STR_NULL),
-				EndContainer(),
-				/* Date. */
-				NWidget(NWID_HORIZONTAL),
-					NWidget(WWT_TEXT, COLOUR_ORANGE), SetDataTip(STR_MAPGEN_DATE, STR_NULL), SetPadding(1, 0, 0, 0),
-					NWidget(NWID_SPACER), SetMinimalSize(6, 0), SetFill(1, 0),
-					NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_CS_START_DATE_DOWN), SetFill(0, 1), SetDataTip(SPR_ARROW_DOWN, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_BACKWARD),
-					NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_CS_START_DATE_TEXT), SetDataTip(STR_BLACK_DATE_LONG, STR_NULL),
-					NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_CS_START_DATE_UP), SetFill(0, 1), SetDataTip(SPR_ARROW_UP, STR_SCENEDIT_TOOLBAR_TOOLTIP_MOVE_THE_STARTING_DATE_FORWARD),
-				EndContainer(),
-				/* Flat map height. */
-				NWidget(NWID_HORIZONTAL),
-					NWidget(WWT_TEXT, COLOUR_ORANGE),
-												SetDataTip(STR_SE_MAPGEN_FLAT_WORLD_HEIGHT, STR_NULL), SetPadding(1, 0, 0, 0),
-					NWidget(NWID_SPACER), SetMinimalSize(6, 0), SetFill(1, 0),
-					NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_CS_FLAT_LAND_HEIGHT_DOWN), SetFill(0, 1), SetDataTip(SPR_ARROW_DOWN, STR_SE_MAPGEN_FLAT_WORLD_HEIGHT_DOWN),
-					NWidget(WWT_TEXTBTN, COLOUR_ORANGE, WID_CS_FLAT_LAND_HEIGHT_TEXT), SetDataTip(STR_BLACK_INT, STR_NULL),
-					NWidget(WWT_IMGBTN, COLOUR_ORANGE, WID_CS_FLAT_LAND_HEIGHT_UP), SetFill(0, 1), SetDataTip(SPR_ARROW_UP, STR_SE_MAPGEN_FLAT_WORLD_HEIGHT_UP),
-				EndContainer(),
-			EndContainer(),
-		EndContainer(),
-	EndContainer(),
-};
-
-static const WindowDesc _create_scenario_desc(
-	WDP_CENTER, 0, 0,
-	WC_GENERATE_LANDSCAPE, WC_NONE,
-	WDF_UNCLICK_BUTTONS,
-	_nested_create_scenario_widgets, lengthof(_nested_create_scenario_widgets)
-);
-
-/** Show the window to create a scenario. */
-void ShowCreateScenario()
-{
-	DeleteWindowByClass(WC_GENERATE_LANDSCAPE);
-	new CreateScenarioWindow(&_create_scenario_desc, GLWM_SCENARIO);
-}
-
 static const NWidgetPart _nested_generate_progress_widgets[] = {
 	NWidget(WWT_CAPTION, COLOUR_GREY), SetDataTip(STR_GENERATION_WORLD, STR_TOOLTIP_WINDOW_TITLE_DRAG_THIS),
 	NWidget(WWT_PANEL, COLOUR_GREY),
@@ -1137,7 +1837,6 @@
 	EndContainer(),
 };
 
-
 static const WindowDesc _generate_progress_desc(
 	WDP_CENTER, 0, 0,
 	WC_MODAL_PROGRESS, WC_NONE,
diff -r 105cb37f0058 -r 8feb2779b205 src/openttd.cpp
--- a/src/openttd.cpp	Tue Jul 17 17:01:20 2012 +0100
+++ b/src/openttd.cpp	Thu Jul 19 22:53:03 2012 +0100
@@ -927,7 +927,7 @@
 	ResetGRFConfig(true);
 
 	GenerateWorldSetCallback(&MakeNewEditorWorldDone);
-	GenerateWorld(GWM_EMPTY, 1 << _settings_game.game_creation.map_x, 1 << _settings_game.game_creation.map_y);
+	GenerateWorld(_settings_newgame.game_creation.terrain_type_totally_flat ? GWM_EMPTY : GWM_RANDOM, 1 << _settings_game.game_creation.map_x, 1 << _settings_game.game_creation.map_y);
 }
 
 /**
