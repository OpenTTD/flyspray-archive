Index: lang/english.txt
===================================================================
--- lang/english.txt	(Revision 7325)
+++ lang/english.txt	(Arbeitskopie)
@@ -374,6 +374,7 @@
 STR_SORT_BY_NUMBER                                              :Number
 STR_SORT_BY_PROFIT_LAST_YEAR                                    :Profit last year
 STR_SORT_BY_PROFIT_THIS_YEAR                                    :Profit this year
+STR_SORT_BY_PROFIT_AVERAGE_5_YEAR				:Profit average 5 yearly
 STR_SORT_BY_AGE                                                 :Age
 STR_SORT_BY_RELIABILITY                                         :Reliability
 STR_SORT_BY_TOTAL_CAPACITY_PER_CARGOTYPE                        :Total capacity per cargo type
@@ -455,7 +456,7 @@
 STR_0195_SHOW_VEGETATION_ON_MAP                                 :{BLACK}Show vegetation on map
 STR_0196_SHOW_LAND_OWNERS_ON_MAP                                :{BLACK}Show land owners on map
 STR_0197_TOGGLE_TOWN_NAMES_ON_OFF                               :{BLACK}Toggle town names on/off on map
-STR_0198_PROFIT_THIS_YEAR_LAST_YEAR                             :{TINYFONT}{BLACK}Profit this year: {CURRENCY} (last year: {CURRENCY})
+STR_0198_PROFIT_THIS_YEAR_LAST_YEAR                             :{TINYFONT}{BLACK}Profit this year: {CURRENCY} (last year: {CURRENCY} ; average: {CURRENCY})
 
 ############ range for service numbers starts
 STR_AGE                                                         :{COMMA} year{P "" s} ({COMMA})
@@ -2592,7 +2593,8 @@
 STR_885C_BROKEN_DOWN                                            :{RED}Broken down
 STR_885D_AGE_RUNNING_COST_YR                                    :{BLACK}Age: {LTBLUE}{STRING2}{BLACK}   Running Cost: {LTBLUE}{CURRENCY}/yr
 STR_VEHICLE_INFO_WEIGHT_POWER_MAX_SPEED                         :{BLACK}Weight: {LTBLUE}{WEIGHT_S}  {BLACK}Power: {LTBLUE}{POWER}{BLACK} Max. speed: {LTBLUE}{VELOCITY}
-STR_885F_PROFIT_THIS_YEAR_LAST_YEAR                             :{BLACK}Profit this year: {LTBLUE}{CURRENCY}  (last year: {CURRENCY})
+STR_885F_PROFIT_THIS_YEAR_LAST_YEAR                             :{BLACK}Profit this year: {LTBLUE}{CURRENCY}  {BLACK}last year: {LTBLUE}{CURRENCY}
+STR_TRAIN_PROFIT_AVERAGE                             		 :{BLACK}Profit average 5 yearly: {LTBLUE}{CURRENCY}
 STR_8860_RELIABILITY_BREAKDOWNS                                 :{BLACK}Reliability: {LTBLUE}{COMMA}%  {BLACK}Breakdowns since last service: {LTBLUE}{COMMA}
 STR_8861_STOPPED                                                :{RED}Stopped
 STR_8862_CAN_T_MAKE_TRAIN_PASS_SIGNAL                           :{WHITE}Can't make train pass signal at danger...
@@ -2626,7 +2628,8 @@
 STR_900C_DETAILS                                                :{WHITE}{VEHICLE} (Details)
 STR_900D_AGE_RUNNING_COST_YR                                    :{BLACK}Age: {LTBLUE}{STRING2}{BLACK}   Running Cost: {LTBLUE}{CURRENCY}/yr
 STR_900E_MAX_SPEED                                              :{BLACK}Max. speed: {LTBLUE}{VELOCITY}
-STR_900F_PROFIT_THIS_YEAR_LAST_YEAR                             :{BLACK}Profit this year: {LTBLUE}{CURRENCY}  (last year: {CURRENCY})
+STR_900F_PROFIT_THIS_YEAR_LAST_YEAR                             :{BLACK}Profit this year: {LTBLUE}{CURRENCY}  {BLACK}last year: {LTBLUE}{CURRENCY}
+STR_ROADVEH_PROFIT_AVERAGE              	       		 :{BLACK}Profit average 5 yearly: {LTBLUE}{CURRENCY}
 STR_9010_RELIABILITY_BREAKDOWNS                                 :{BLACK}Reliability: {LTBLUE}{COMMA}%  {BLACK}Breakdowns since last service: {LTBLUE}{COMMA}
 STR_9011_BUILT_VALUE                                            :{LTBLUE}{STRING}{BLACK}   Built: {LTBLUE}{NUM}{BLACK} Value: {LTBLUE}{CURRENCY}
 STR_9012_CAPACITY                                               :{BLACK}Capacity: {LTBLUE}{CARGO}
@@ -2700,7 +2703,8 @@
 STR_9811_DETAILS                                                :{WHITE}{VEHICLE} (Details)
 STR_9812_AGE_RUNNING_COST_YR                                    :{BLACK}Age: {LTBLUE}{STRING2}{BLACK}   Running Cost: {LTBLUE}{CURRENCY}/yr
 STR_9813_MAX_SPEED                                              :{BLACK}Max. speed: {LTBLUE}{VELOCITY}
-STR_9814_PROFIT_THIS_YEAR_LAST_YEAR                             :{BLACK}Profit this year: {LTBLUE}{CURRENCY}  (last year: {CURRENCY})
+STR_9814_PROFIT_THIS_YEAR_LAST_YEAR                             :{BLACK}Profit this year: {LTBLUE}{CURRENCY}  {BLACK}last year: {LTBLUE}{CURRENCY}
+STR_SHIP_PROFIT_AVERAGE                             		 :{BLACK}Profit average 5 yearly: {LTBLUE}{CURRENCY}
 STR_9815_RELIABILITY_BREAKDOWNS                                 :{BLACK}Reliability: {LTBLUE}{COMMA}%  {BLACK}Breakdowns since last service: {LTBLUE}{COMMA}
 STR_9816_BUILT_VALUE                                            :{LTBLUE}{STRING}{BLACK}   Built: {LTBLUE}{NUM}{BLACK} Value: {LTBLUE}{CURRENCY}
 STR_9817_CAPACITY                                               :{BLACK}Capacity: {LTBLUE}{CARGO}
@@ -2770,7 +2774,8 @@
 STR_A00C_DETAILS                                                :{WHITE}{VEHICLE} (Details)
 STR_A00D_AGE_RUNNING_COST_YR                                    :{BLACK}Age: {LTBLUE}{STRING2}{BLACK}   Running Cost: {LTBLUE}{CURRENCY}/yr
 STR_A00E_MAX_SPEED                                              :{BLACK}Max. speed: {LTBLUE}{VELOCITY}
-STR_A00F_PROFIT_THIS_YEAR_LAST_YEAR                             :{BLACK}Profit this year: {LTBLUE}{CURRENCY}  (last year: {CURRENCY})
+STR_A00F_PROFIT_THIS_YEAR_LAST_YEAR                             :{BLACK}Profit this year: {LTBLUE}{CURRENCY}  {BLACK}last year: {LTBLUE}{CURRENCY}
+STR_AIRCRAFT_PROFIT_AVERAGE              	               	 :{BLACK}Profit average 5 yearly: {LTBLUE}{CURRENCY}
 STR_A010_RELIABILITY_BREAKDOWNS                                 :{BLACK}Reliability: {LTBLUE}{COMMA}%  {BLACK}Breakdowns since last service: {LTBLUE}{COMMA}
 STR_A011_BUILT_VALUE                                            :{LTBLUE}{STRING}{BLACK}   Built: {LTBLUE}{NUM}{BLACK} Value: {LTBLUE}{CURRENCY}
 STR_A012_CAN_T_SEND_AIRCRAFT_TO                                 :{WHITE}Can't send aircraft to hangar...
Index: vehicle.c
===================================================================
--- vehicle.c	(Revision 7325)
+++ vehicle.c	(Arbeitskopie)
@@ -2050,6 +2050,12 @@
 			ChangeVehicleViewWindow(old_v, new_v);
 			new_v->profit_this_year = old_v->profit_this_year;
 			new_v->profit_last_year = old_v->profit_last_year;
+			new_v->profit_average_5yr = old_v->profit_average_5yr;
+			new_v->profit_last_5yr[0] = old_v->profit_last_5yr[0];
+			new_v->profit_last_5yr[1] = old_v->profit_last_5yr[1];
+			new_v->profit_last_5yr[2] = old_v->profit_last_5yr[2];
+			new_v->profit_last_5yr[3] = old_v->profit_last_5yr[3];
+			new_v->profit_last_5yr[4] = old_v->profit_last_5yr[4];
 			new_v->service_interval = old_v->service_interval;
 			new_front = true;
 			new_v->unitnumber = old_v->unitnumber; // use the same unit number
@@ -2990,6 +2996,8 @@
 
 	    SLE_VAR(Vehicle, profit_this_year,     SLE_INT32),
 	    SLE_VAR(Vehicle, profit_last_year,     SLE_INT32),
+	    SLE_CONDVAR(Vehicle, profit_average_5yr, SLE_INT32, 30, SL_MAX_VERSION),
+	    SLE_CONDVAR(Vehicle, profit_last_5yr, SLE_INT32, 30, SL_MAX_VERSION),
 	    SLE_VAR(Vehicle, value,                SLE_UINT32),
 
 	    SLE_VAR(Vehicle, random_bits,          SLE_UINT8),
@@ -3216,3 +3224,42 @@
 const ChunkHandler _veh_chunk_handlers[] = {
 	{ 'VEHS', Save_VEHS, Load_VEHS, CH_SPARSE_ARRAY | CH_LAST},
 };
+
+/* Calculate the average proftit of max 5 years */
+int32 CalculateAverageProfit(Vehicle *v) {
+	int64 sum = 0;
+	uint age = v->age / 365;
+	uint count;
+	
+	/* Fill the "profit of the last 5 years" array */
+	if (age < 5) {
+		v->profit_last_5yr[age] = v->profit_this_year;
+	} else {
+		v->profit_last_5yr[0] = v->profit_last_5yr[1];
+		v->profit_last_5yr[1] = v->profit_last_5yr[2];
+		v->profit_last_5yr[2] = v->profit_last_5yr[3];
+		v->profit_last_5yr[3] = v->profit_last_5yr[4];
+		v->profit_last_5yr[4] = v->profit_this_year;
+		age = 5; // set 5 to stay inside the array
+	}
+
+	/* sum up the profits up to 5 years backwards */
+	if (age > 0) { // do not divide with 0 =)
+		for (count = 0; count < age; count++) {
+			sum += v->profit_last_5yr[count];
+		}
+		sum = sum / age;
+	} else {
+		sum = v->profit_this_year;
+	}
+	return sum;
+}
+
+/* Generate the new profit values */
+void VehicleYearlyLoop(Vehicle *v)
+{
+	v->profit_average_5yr = CalculateAverageProfit(v);
+	v->profit_last_year = v->profit_this_year;
+	v->profit_this_year = 0;
+}
+
Index: vehicle.h
===================================================================
--- vehicle.h	(Revision 7325)
+++ vehicle.h	(Arbeitskopie)
@@ -233,6 +233,8 @@
 
 	int32 profit_this_year;
 	int32 profit_last_year;
+	int32 profit_average_5yr;
+	int32 profit_last_5yr[5];
 	uint32 value;
 
 	union {
@@ -268,6 +270,9 @@
 void CallVehicleTicks(void);
 Vehicle *FindVehicleOnTileZ(TileIndex tile, byte z);
 
+int32 CalculateAverageProfit(Vehicle *v);
+void VehicleYearlyLoop(Vehicle *v);
+
 void InitializeTrains(void);
 byte VehicleRandomBits(void);
 
Index: aircraft_cmd.c
===================================================================
--- aircraft_cmd.c	(Revision 7325)
+++ aircraft_cmd.c	(Arbeitskopie)
@@ -723,8 +723,7 @@
 
 	FOR_ALL_VEHICLES(v) {
 		if (v->type == VEH_Aircraft && v->subtype <= 2) {
-			v->profit_last_year = v->profit_this_year;
-			v->profit_this_year = 0;
+			VehicleYearlyLoop(v);
 			InvalidateWindow(WC_VEHICLE_DETAILS, v->index);
 		}
 	}
Index: vehicle_gui.c
===================================================================
--- vehicle_gui.c	(Revision 7325)
+++ vehicle_gui.c	(Arbeitskopie)
@@ -59,6 +59,7 @@
 static VehicleSortListingTypeFunction VehicleAgeSorter;
 static VehicleSortListingTypeFunction VehicleProfitThisYearSorter;
 static VehicleSortListingTypeFunction VehicleProfitLastYearSorter;
+static VehicleSortListingTypeFunction VehicleProfitAverage5YearSorter;
 static VehicleSortListingTypeFunction VehicleCargoSorter;
 static VehicleSortListingTypeFunction VehicleReliabilitySorter;
 static VehicleSortListingTypeFunction VehicleMaxSpeedSorter;
@@ -71,6 +72,7 @@
 	&VehicleAgeSorter,
 	&VehicleProfitThisYearSorter,
 	&VehicleProfitLastYearSorter,
+	&VehicleProfitAverage5YearSorter,
 	&VehicleCargoSorter,
 	&VehicleReliabilitySorter,
 	&VehicleMaxSpeedSorter,
@@ -84,6 +86,7 @@
 	STR_SORT_BY_AGE,
 	STR_SORT_BY_PROFIT_THIS_YEAR,
 	STR_SORT_BY_PROFIT_LAST_YEAR,
+	STR_SORT_BY_PROFIT_AVERAGE_5_YEAR,
 	STR_SORT_BY_TOTAL_CAPACITY_PER_CARGOTYPE,
 	STR_SORT_BY_RELIABILITY,
 	STR_SORT_BY_MAX_SPEED,
@@ -628,6 +631,18 @@
 	return (_internal_sort_order & 1) ? -r : r;
 }
 
+
+static int CDECL VehicleProfitAverage5YearSorter(const void *a, const void *b)
+{
+	const Vehicle* va = *(const Vehicle**)a;
+	const Vehicle* vb = *(const Vehicle**)b;
+	int r = va->profit_average_5yr - vb->profit_average_5yr;
+
+	VEHICLEUNITNUMBERSORTER(r, va, vb);
+
+	return (_internal_sort_order & 1) ? -r : r;
+}
+
 static int CDECL VehicleCargoSorter(const void *a, const void *b)
 {
 	const Vehicle* va = *(const Vehicle**)a;
@@ -1691,6 +1706,7 @@
 
 		SetDParam(0, v->profit_this_year);
 		SetDParam(1, v->profit_last_year);
+		SetDParam(2, v->profit_average_5yr);
 
 		DrawVehicleImage(v, x + 19, y + 6, w->widget[VLW_WIDGET_LIST].right - w->widget[VLW_WIDGET_LIST].left - 20, 0, INVALID_VEHICLE);
 		DrawString(x + 19, y + w->resize.step_height - 8, STR_0198_PROFIT_THIS_YEAR_LAST_YEAR, 0);
Index: roadveh_cmd.c
===================================================================
--- roadveh_cmd.c	(Revision 7325)
+++ roadveh_cmd.c	(Arbeitskopie)
@@ -1728,8 +1728,7 @@
 
 	FOR_ALL_VEHICLES(v) {
 		if (v->type == VEH_Road) {
-			v->profit_last_year = v->profit_this_year;
-			v->profit_this_year = 0;
+			VehicleYearlyLoop(v);
 			InvalidateWindow(WC_VEHICLE_DETAILS, v->index);
 		}
 	}
Index: aircraft_gui.c
===================================================================
--- aircraft_gui.c	(Revision 7325)
+++ aircraft_gui.c	(Arbeitskopie)
@@ -65,27 +65,29 @@
 			SetDParam(0, v->profit_this_year);
 			SetDParam(1, v->profit_last_year);
 			DrawString(2, 35, STR_A00F_PROFIT_THIS_YEAR_LAST_YEAR, 0);
+			SetDParam(0, v->profit_average_5yr);
+			DrawString(2, 45, STR_AIRCRAFT_PROFIT_AVERAGE, 0);
 		}
 
 		/* Draw breakdown & reliability */
 		{
 			SetDParam(0, v->reliability * 100 >> 16);
 			SetDParam(1, v->breakdowns_since_last_service);
-			DrawString(2, 45, STR_A010_RELIABILITY_BREAKDOWNS, 0);
+			DrawString(2, 55, STR_A010_RELIABILITY_BREAKDOWNS, 0);
 		}
 
 		/* Draw service interval text */
 		{
 			SetDParam(0, v->service_interval);
 			SetDParam(1, v->date_of_last_service);
-			DrawString(13, 103, _patches.servint_ispercent?STR_SERVICING_INTERVAL_PERCENT:STR_883C_SERVICING_INTERVAL_DAYS, 0);
+			DrawString(13, 113, _patches.servint_ispercent?STR_SERVICING_INTERVAL_PERCENT:STR_883C_SERVICING_INTERVAL_DAYS, 0);
 		}
 
-		DrawAircraftImage(v, 3, 57, INVALID_VEHICLE);
+		DrawAircraftImage(v, 3, 67, INVALID_VEHICLE);
 
 		{
 			const Vehicle *u;
-			int y = 57;
+			int y = 67;
 
 			do {
 				if (v->subtype <= 2) {
@@ -158,16 +160,16 @@
 {   WWT_CLOSEBOX,   RESIZE_NONE,    14,     0,    10,     0,    13, STR_00C5,         STR_018B_CLOSE_WINDOW },
 {    WWT_CAPTION,   RESIZE_NONE,    14,    11,   349,     0,    13, STR_A00C_DETAILS, STR_018C_WINDOW_TITLE_DRAG_THIS },
 { WWT_PUSHTXTBTN,   RESIZE_NONE,    14,   350,   389,     0,    13, STR_01AA_NAME,    STR_A032_NAME_AIRCRAFT },
-{      WWT_PANEL,   RESIZE_NONE,    14,     0,   389,    14,    55, 0x0,              STR_NULL },
-{      WWT_PANEL,   RESIZE_NONE,    14,     0,   389,    56,   101, 0x0,              STR_NULL },
-{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,   102,   107, STR_0188,         STR_884D_INCREASE_SERVICING_INTERVAL },
-{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,   108,   113, STR_0189,         STR_884E_DECREASE_SERVICING_INTERVAL },
-{      WWT_PANEL,   RESIZE_NONE,    14,    11,   389,   102,   113, 0x0,              STR_NULL },
+{      WWT_PANEL,   RESIZE_NONE,    14,     0,   389,    14,    65, 0x0,              STR_NULL },
+{      WWT_PANEL,   RESIZE_NONE,    14,     0,   389,    66,   111, 0x0,              STR_NULL },
+{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,   112,   117, STR_0188,         STR_884D_INCREASE_SERVICING_INTERVAL },
+{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,   118,   123, STR_0189,         STR_884E_DECREASE_SERVICING_INTERVAL },
+{      WWT_PANEL,   RESIZE_NONE,    14,    11,   389,   112,   123, 0x0,              STR_NULL },
 {   WIDGETS_END},
 };
 
 static const WindowDesc _aircraft_details_desc = {
-	WDP_AUTO, WDP_AUTO, 390, 114,
+	WDP_AUTO, WDP_AUTO, 390, 124,
 	WC_VEHICLE_DETAILS, WC_VEHICLE_VIEW,
 	WDF_STD_TOOLTIPS | WDF_STD_BTN | WDF_DEF_WIDGET | WDF_UNCLICK_BUTTONS,
 	_aircraft_details_widgets,
Index: train_cmd.c
===================================================================
--- train_cmd.c	(Revision 7325)
+++ train_cmd.c	(Arbeitskopie)
@@ -3668,8 +3668,7 @@
 					0);
 			}
 
-			v->profit_last_year = v->profit_this_year;
-			v->profit_this_year = 0;
+			VehicleYearlyLoop(v);
 			InvalidateWindow(WC_VEHICLE_DETAILS, v->index);
 		}
 	}
Index: ship_cmd.c
===================================================================
--- ship_cmd.c	(Revision 7325)
+++ ship_cmd.c	(Arbeitskopie)
@@ -794,8 +794,7 @@
 
 	FOR_ALL_VEHICLES(v) {
 		if (v->type == VEH_Ship) {
-			v->profit_last_year = v->profit_this_year;
-			v->profit_this_year = 0;
+			VehicleYearlyLoop(v);
 			InvalidateWindow(WC_VEHICLE_DETAILS, v->index);
 		}
 	}
Index: roadveh_gui.c
===================================================================
--- roadveh_gui.c	(Revision 7325)
+++ roadveh_gui.c	(Arbeitskopie)
@@ -118,32 +118,35 @@
 			SetDParam(0, v->profit_this_year);
 			SetDParam(1, v->profit_last_year);
 			DrawString(2, 35, STR_900F_PROFIT_THIS_YEAR_LAST_YEAR, 0);
+			SetDParam(0, v->profit_average_5yr);
+			DrawString(2, 45, STR_ROADVEH_PROFIT_AVERAGE, 0);
 		}
 
+
 		/* Draw breakdown & reliability */
 		{
 			SetDParam(0, v->reliability * 100 >> 16);
 			SetDParam(1, v->breakdowns_since_last_service);
-			DrawString(2, 45, STR_9010_RELIABILITY_BREAKDOWNS, 0);
+			DrawString(2, 55, STR_9010_RELIABILITY_BREAKDOWNS, 0);
 		}
 
 		/* Draw service interval text */
 		{
 			SetDParam(0, v->service_interval);
 			SetDParam(1, v->date_of_last_service);
-			DrawString(13, 90, _patches.servint_ispercent?STR_SERVICING_INTERVAL_PERCENT:STR_883C_SERVICING_INTERVAL_DAYS, 0);
+			DrawString(13, 100, _patches.servint_ispercent?STR_SERVICING_INTERVAL_PERCENT:STR_883C_SERVICING_INTERVAL_DAYS, 0);
 		}
 
-		DrawRoadVehImage(v, 3, 57, INVALID_VEHICLE);
+		DrawRoadVehImage(v, 3, 67, INVALID_VEHICLE);
 
 		SetDParam(0, GetCustomEngineName(v->engine_type));
 		SetDParam(1, v->build_year);
 		SetDParam(2, v->value);
-		DrawString(34, 57, STR_9011_BUILT_VALUE, 0);
+		DrawString(34, 67, STR_9011_BUILT_VALUE, 0);
 
 		SetDParam(0, v->cargo_type);
 		SetDParam(1, v->cargo_cap);
-		DrawString(34, 67, STR_9012_CAPACITY, 0);
+		DrawString(34, 77, STR_9012_CAPACITY, 0);
 
 		str = STR_8812_EMPTY;
 		if (v->cargo_count != 0) {
@@ -152,7 +155,7 @@
 			SetDParam(2, v->cargo_source);
 			str = STR_8813_FROM;
 		}
-		DrawString(34, 78, str, 0);
+		DrawString(34, 88, str, 0);
 	} break;
 
 	case WE_CLICK: {
@@ -196,16 +199,16 @@
 {   WWT_CLOSEBOX,   RESIZE_NONE,    14,     0,    10,     0,    13, STR_00C5,         STR_018B_CLOSE_WINDOW},
 {    WWT_CAPTION,   RESIZE_NONE,    14,    11,   339,     0,    13, STR_900C_DETAILS, STR_018C_WINDOW_TITLE_DRAG_THIS},
 { WWT_PUSHTXTBTN,   RESIZE_NONE,    14,   340,   379,     0,    13, STR_01AA_NAME,    STR_902E_NAME_ROAD_VEHICLE},
-{      WWT_PANEL,   RESIZE_NONE,    14,     0,   379,    14,    55, 0x0,              STR_NULL},
-{      WWT_PANEL,   RESIZE_NONE,    14,     0,   379,    56,    88, 0x0,              STR_NULL},
-{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,    89,    94, STR_0188,         STR_884D_INCREASE_SERVICING_INTERVAL},
-{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,    95,   100, STR_0189,         STR_884E_DECREASE_SERVICING_INTERVAL},
-{      WWT_PANEL,   RESIZE_NONE,    14,    11,   379,    89,   100, 0x0,              STR_NULL},
+{      WWT_PANEL,   RESIZE_NONE,    14,     0,   379,    14,    65, 0x0,              STR_NULL},
+{      WWT_PANEL,   RESIZE_NONE,    14,     0,   379,    66,    98, 0x0,              STR_NULL},
+{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,    99,   104, STR_0188,         STR_884D_INCREASE_SERVICING_INTERVAL},
+{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,   105,   110, STR_0189,         STR_884E_DECREASE_SERVICING_INTERVAL},
+{      WWT_PANEL,   RESIZE_NONE,    14,    11,   379,    99,   110, 0x0,              STR_NULL},
 {   WIDGETS_END},
 };
 
 static const WindowDesc _roadveh_details_desc = {
-	WDP_AUTO, WDP_AUTO, 380, 101,
+	WDP_AUTO, WDP_AUTO, 380, 111,
 	WC_VEHICLE_DETAILS,WC_VEHICLE_VIEW,
 	WDF_STD_TOOLTIPS | WDF_STD_BTN | WDF_DEF_WIDGET | WDF_UNCLICK_BUTTONS,
 	_roadveh_details_widgets,
Index: train_gui.c
===================================================================
--- train_gui.c	(Revision 7325)
+++ train_gui.c	(Arbeitskopie)
@@ -944,16 +944,19 @@
 	SetDParam(0, v->profit_this_year);
 	SetDParam(1, v->profit_last_year);
 	DrawString(x, 35, STR_885F_PROFIT_THIS_YEAR_LAST_YEAR, 0);
+	
+	SetDParam(0, v->profit_average_5yr);
+	DrawString(x, 45, STR_ROADVEH_PROFIT_AVERAGE, 0);
 
 	SetDParam(0, 100 * (v->reliability>>8) >> 8);
 	SetDParam(1, v->breakdowns_since_last_service);
-	DrawString(x, 45, STR_8860_RELIABILITY_BREAKDOWNS, 0);
+	DrawString(x, 55, STR_8860_RELIABILITY_BREAKDOWNS, 0);
 
 	SetDParam(0, v->service_interval);
 	SetDParam(1, v->date_of_last_service);
-	DrawString(x + 11, 57 + (w->vscroll.cap * 14), _patches.servint_ispercent ? STR_SERVICING_INTERVAL_PERCENT : STR_883C_SERVICING_INTERVAL_DAYS, 0);
+	DrawString(x + 11, 67 + (w->vscroll.cap * 14), _patches.servint_ispercent ? STR_SERVICING_INTERVAL_PERCENT : STR_883C_SERVICING_INTERVAL_DAYS, 0);
 
-	y = 57;
+	y = 67;
 	sel = w->vscroll.pos;
 
 	// draw the first 3 details tabs
@@ -1080,23 +1083,23 @@
 {   WWT_CLOSEBOX, RESIZE_NONE,   14,   0,  10,   0,  13, STR_00C5,             STR_018B_CLOSE_WINDOW},
 {    WWT_CAPTION, RESIZE_NONE,   14,  11, 329,   0,  13, STR_8802_DETAILS,     STR_018C_WINDOW_TITLE_DRAG_THIS},
 { WWT_PUSHTXTBTN, RESIZE_NONE,   14, 330, 369,   0,  13, STR_01AA_NAME,        STR_8867_NAME_TRAIN},
-{      WWT_PANEL, RESIZE_NONE,   14,   0, 369,  14,  55, 0x0,                  STR_NULL},
-{     WWT_MATRIX, RESIZE_BOTTOM, 14,   0, 357,  56, 139, 0x601,                STR_NULL},
-{  WWT_SCROLLBAR, RESIZE_BOTTOM, 14, 358, 369,  56, 139, 0x0,                  STR_0190_SCROLL_BAR_SCROLLS_LIST},
-{ WWT_PUSHTXTBTN, RESIZE_TB,     14,   0,  10, 140, 145, STR_0188,             STR_884D_INCREASE_SERVICING_INTERVAL},
-{ WWT_PUSHTXTBTN, RESIZE_TB,     14,   0,  10, 146, 151, STR_0189,             STR_884E_DECREASE_SERVICING_INTERVAL},
-{      WWT_PANEL, RESIZE_TB,     14,  11, 369, 140, 151, 0x0,                  STR_NULL},
-{ WWT_PUSHTXTBTN, RESIZE_TB,     14,   0,  89, 152, 163, STR_013C_CARGO,       STR_884F_SHOW_DETAILS_OF_CARGO_CARRIED},
-{ WWT_PUSHTXTBTN, RESIZE_TB,     14,  90, 178, 152, 163, STR_013D_INFORMATION, STR_8850_SHOW_DETAILS_OF_TRAIN_VEHICLES},
-{ WWT_PUSHTXTBTN, RESIZE_TB,     14, 179, 268, 152, 163, STR_013E_CAPACITIES,  STR_8851_SHOW_CAPACITIES_OF_EACH},
-{ WWT_PUSHTXTBTN, RESIZE_TB,     14, 269, 357, 152, 163, STR_013E_TOTAL_CARGO, STR_8852_SHOW_TOTAL_CARGO},
-{  WWT_RESIZEBOX, RESIZE_TB,     14, 358, 369, 152, 163, 0x0,                  STR_RESIZE_BUTTON},
+{      WWT_PANEL, RESIZE_NONE,   14,   0, 369,  14,  65, 0x0,                  STR_NULL},
+{     WWT_MATRIX, RESIZE_BOTTOM, 14,   0, 357,  66, 149, 0x601,                STR_NULL},
+{  WWT_SCROLLBAR, RESIZE_BOTTOM, 14, 358, 369,  66, 149, 0x0,                  STR_0190_SCROLL_BAR_SCROLLS_LIST},
+{ WWT_PUSHTXTBTN, RESIZE_TB,     14,   0,  10, 150, 155, STR_0188,             STR_884D_INCREASE_SERVICING_INTERVAL},
+{ WWT_PUSHTXTBTN, RESIZE_TB,     14,   0,  10, 156, 161, STR_0189,             STR_884E_DECREASE_SERVICING_INTERVAL},
+{      WWT_PANEL, RESIZE_TB,     14,  11, 369, 150, 161, 0x0,                  STR_NULL},
+{ WWT_PUSHTXTBTN, RESIZE_TB,     14,   0,  89, 162, 173, STR_013C_CARGO,       STR_884F_SHOW_DETAILS_OF_CARGO_CARRIED},
+{ WWT_PUSHTXTBTN, RESIZE_TB,     14,  90, 178, 162, 173, STR_013D_INFORMATION, STR_8850_SHOW_DETAILS_OF_TRAIN_VEHICLES},
+{ WWT_PUSHTXTBTN, RESIZE_TB,     14, 179, 268, 162, 173, STR_013E_CAPACITIES,  STR_8851_SHOW_CAPACITIES_OF_EACH},
+{ WWT_PUSHTXTBTN, RESIZE_TB,     14, 269, 357, 162, 173, STR_013E_TOTAL_CARGO, STR_8852_SHOW_TOTAL_CARGO},
+{  WWT_RESIZEBOX, RESIZE_TB,     14, 358, 369, 162, 173, 0x0,                  STR_RESIZE_BUTTON},
 {   WIDGETS_END},
 };
 
 
 static const WindowDesc _train_details_desc = {
-	WDP_AUTO, WDP_AUTO, 370, 164,
+	WDP_AUTO, WDP_AUTO, 370, 174,
 	WC_VEHICLE_DETAILS,WC_VEHICLE_VIEW,
 	WDF_STD_TOOLTIPS | WDF_STD_BTN | WDF_DEF_WIDGET | WDF_UNCLICK_BUTTONS | WDF_RESIZABLE,
 	_train_details_widgets,
Index: ship_gui.c
===================================================================
--- ship_gui.c	(Revision 7325)
+++ ship_gui.c	(Arbeitskopie)
@@ -117,32 +117,34 @@
 			SetDParam(0, v->profit_this_year);
 			SetDParam(1, v->profit_last_year);
 			DrawString(2, 35, STR_9814_PROFIT_THIS_YEAR_LAST_YEAR, 0);
+			SetDParam(0, v->profit_average_5yr);
+			DrawString(2, 45, STR_SHIP_PROFIT_AVERAGE, 0);
 		}
 
 		/* Draw breakdown & reliability */
 		{
 			SetDParam(0, v->reliability * 100 >> 16);
 			SetDParam(1, v->breakdowns_since_last_service);
-			DrawString(2, 45, STR_9815_RELIABILITY_BREAKDOWNS, 0);
+			DrawString(2, 55, STR_9815_RELIABILITY_BREAKDOWNS, 0);
 		}
 
 		/* Draw service interval text */
 		{
 			SetDParam(0, v->service_interval);
 			SetDParam(1, v->date_of_last_service);
-			DrawString(13, 90, _patches.servint_ispercent?STR_SERVICING_INTERVAL_PERCENT:STR_883C_SERVICING_INTERVAL_DAYS, 0);
+			DrawString(13, 100, _patches.servint_ispercent?STR_SERVICING_INTERVAL_PERCENT:STR_883C_SERVICING_INTERVAL_DAYS, 0);
 		}
 
-		DrawShipImage(v, 3, 57, INVALID_VEHICLE);
+		DrawShipImage(v, 3, 67, INVALID_VEHICLE);
 
 		SetDParam(1, v->build_year);
 		SetDParam(0, GetCustomEngineName(v->engine_type));
 		SetDParam(2, v->value);
-		DrawString(74, 57, STR_9816_BUILT_VALUE, 0);
+		DrawString(74, 67, STR_9816_BUILT_VALUE, 0);
 
 		SetDParam(0, v->cargo_type);
 		SetDParam(1, v->cargo_cap);
-		DrawString(74, 67, STR_9817_CAPACITY, 0);
+		DrawString(74, 77, STR_9817_CAPACITY, 0);
 
 		str = STR_8812_EMPTY;
 		if (v->cargo_count != 0) {
@@ -151,7 +153,7 @@
 			SetDParam(2, v->cargo_source);
 			str = STR_8813_FROM;
 		}
-		DrawString(74, 78, str, 0);
+		DrawString(74, 88, str, 0);
 	} break;
 
 	case WE_CLICK: {
@@ -194,16 +196,16 @@
 {   WWT_CLOSEBOX,   RESIZE_NONE,    14,     0,    10,     0,    13, STR_00C5,         STR_018B_CLOSE_WINDOW},
 {    WWT_CAPTION,   RESIZE_NONE,    14,    11,   364,     0,    13, STR_9811_DETAILS, STR_018C_WINDOW_TITLE_DRAG_THIS},
 { WWT_PUSHTXTBTN,   RESIZE_NONE,    14,   365,   404,     0,    13, STR_01AA_NAME,    STR_982F_NAME_SHIP},
-{      WWT_PANEL,   RESIZE_NONE,    14,     0,   404,    14,    55, 0x0,              STR_NULL},
-{      WWT_PANEL,   RESIZE_NONE,    14,     0,   404,    56,    88, 0x0,              STR_NULL},
-{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,    89,    94, STR_0188,         STR_884D_INCREASE_SERVICING_INTERVAL},
-{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,    95,   100, STR_0189,         STR_884E_DECREASE_SERVICING_INTERVAL},
-{      WWT_PANEL,   RESIZE_NONE,    14,    11,   404,    89,   100, 0x0,              STR_NULL},
+{      WWT_PANEL,   RESIZE_NONE,    14,     0,   404,    14,    65, 0x0,              STR_NULL},
+{      WWT_PANEL,   RESIZE_NONE,    14,     0,   404,    66,    98, 0x0,              STR_NULL},
+{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,    99,   104, STR_0188,         STR_884D_INCREASE_SERVICING_INTERVAL},
+{ WWT_PUSHTXTBTN,   RESIZE_NONE,    14,     0,    10,   105,   110, STR_0189,         STR_884E_DECREASE_SERVICING_INTERVAL},
+{      WWT_PANEL,   RESIZE_NONE,    14,    11,   404,    99,   110, 0x0,              STR_NULL},
 {   WIDGETS_END},
 };
 
 static const WindowDesc _ship_details_desc = {
-	WDP_AUTO, WDP_AUTO, 405, 101,
+	WDP_AUTO, WDP_AUTO, 405, 111,
 	WC_VEHICLE_DETAILS,WC_VEHICLE_VIEW,
 	WDF_STD_TOOLTIPS | WDF_STD_BTN | WDF_DEF_WIDGET | WDF_UNCLICK_BUTTONS,
 	_ship_details_widgets,
